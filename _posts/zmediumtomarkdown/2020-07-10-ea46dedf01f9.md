---
title: "【電腦圖學】學習筆記 — 01：Transformation"
author: "帽捲"
date: 2020-07-10T11:40:57.516+0000
last_modified_at: 2024-09-28T10:49:45.995+0000
categories: ["Maochinn"]
tags: ["computer-graphics","電腦圖學"]
description: "藉由前一篇應該會知道電腦圖學的render pipeline。"
image:
  path: /assets/ea46dedf01f9/0*Z0DhYERSMIQoM6zX.png
lockedPreviewOnly: true
render_with_liquid: false
---

### 【電腦圖學】學習筆記 — 01：Transformation

[&lt;【電腦圖學】學習筆記 — 00：OpenGL](https://medium.com/maochinn/%E9%9B%BB%E8%85%A6%E5%9C%96%E5%AD%B800-opengl-fa7105f59ecd?source=---------21-----------------------){:target="_blank"}

藉由前一篇應該會知道電腦圖學的render pipeline。

我們就先回顧一下其中的geometric pipeline。


![](/assets/ea46dedf01f9/0*J5ZxEhlUvn9gvWvN.png)


首先，在圖學原則上無論要畫什麼東西都必須定義頂點\(Vertex\)，這個頂點可以是3D或是2D的，但是最終要被轉換到2D的整數點，也就是圖片的pixel，而這其中牽涉到一連串的轉換\(Transformation\)，然後投影到2D空間，然後把超出畫面的部份clip掉，最後經過rasterization。這邊細心的人可能會發現有些clip跟projection的位置會相反，其實這就是實作上有人習慣先做完clip再project，但也有人習慣先project完再clip，但這不影響整個流程。

最簡單的渲染就是我們一開始定義的Vertices都在圖片的坐標系，那這就不需要做任何的轉換，例如我在1000\*1000的圖片、視窗上畫一個500\*500的紅色方形在中央，如果在OpenGL1\.x中可以這麼做:


![](/assets/ea46dedf01f9/1*9s16vXe15zB0yRaJ-78PJA.png)



![](/assets/ea46dedf01f9/1*drHDHwxT5ym8qC01ebI-eQ.png)


很直觀的來看我們可以藉由gluOrtho2D來定義整個視窗的X, Y軸的最大最小值，也就是圖片的左下角是\( \-500, \-500\)，右上角是\(500, 500\)，然後我們藉glBegin\(GL\_QUADS\)告訴GL要畫一個方形，glColor3f\(1\.0f, 0\.0f, 0\.0f\)表示紅色，然後指定四個Vertex並畫出來。

但實際上面的code至少已經定義了一個坐標系，就是利用gluOrtho2D定義了投影矩陣，也就是前面pipeline看到的Projector，怎麼說呢？首先，要再次提到OpenGL是一個pipeline，意思是很多東西它都已經定義好了，就像接下來要說的，NDC\( [Normalized Device Coordinate](https://community.khronos.org/t/normalized-device-coordinates/60709){:target="_blank"} \)


![\(right\)NDC](/assets/ea46dedf01f9/0*38C6GPjvMYcB-61T.png)

\(right\)NDC

原則上無論Vertex怎麼定義，最後都要轉換到NDC這個坐標系，也就是一個2\*2\*2的方塊，然後可以想像他會把Z軸整個壓扁變成X\-Y的2D座標，然後把壓扁的「圖片」對齊到視窗畫面\(viewport\)，也可以說是轉換到windows space\(windows coordinate\)。



**This [post](https://medium.com/maochinn/%E9%9B%BB%E8%85%A6%E5%9C%96%E5%AD%B801-transformation-%E6%96%BD%E5%B7%A5%E4%B8%AD-ea46dedf01f9){:target="_blank"} is behind Medium's paywall, View the full [post](https://medium.com/maochinn/%E9%9B%BB%E8%85%A6%E5%9C%96%E5%AD%B801-transformation-%E6%96%BD%E5%B7%A5%E4%B8%AD-ea46dedf01f9){:target="_blank"} on Medium, converted by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}.**
