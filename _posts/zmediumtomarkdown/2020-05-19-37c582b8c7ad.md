---
title: "Blender Interface"
author: "帽捲"
date: 2020-05-19T08:05:06.197+0000
last_modified_at: 2024-07-16T06:27:09.371+0000
categories: ["Maochinn"]
tags: ["blender"]
description: "這邊整理一下blender interface的組成"
image:
  path: /assets/37c582b8c7ad/1*Cc979879aoFS69tsZvBoZg.png
render_with_liquid: false
---

### 【Blender】 Interface介紹

這邊整理一下blender interface的組成

可以看 [這篇](https://hackmd.io/@Sai/r1vnd6Gbx?type=view){:target="_blank"} 有做很清楚的介紹，這邊比較偏向內部資料結構的整理，在詳細講之前，先做個架構的整理，原則上分成

**Window** , **Screen** , **Areas** , **Regions**

直接舉例子來說，使用預設的檔案開啟可以看到


![Editor Type>Outlier, Data API](/assets/37c582b8c7ad/1*Cc979879aoFS69tsZvBoZg.png)

Editor Type>Outlier, Data API

在整份\.blend的檔案原則上只有一個 **window** \(就是你現在這整個視窗\)，而這個 **window** 裡面卻有一系列的 **Screens** ，他其實就對應到最上方的tag


![Tag of Screens](/assets/37c582b8c7ad/1*6jmxOELc1vFIgMkw5_fNwQ.png)

Tag of Screens

進一步我們看到每個 **screen** 裡面會有很多 **Area** ，我們就以預設的Layout來看


![Areas of “Layout”](/assets/37c582b8c7ad/1*u_A0mhAdfyQb-aVVQubPFw.png)

Areas of “Layout”

那每個 **Area** 就對應到這個 **Screen** 的其中一部份，裡面的 _3D viewport_ 就對應到 _Layout_ 裡面的那個顯示方塊的viewport。


![](/assets/37c582b8c7ad/1*jAxUrfPA0_3vgHzaQZjjrA.png)



![3D viewport](/assets/37c582b8c7ad/1*JcOsNj9QIDb-HBkMmpWSkA.png)

3D viewport

這邊可以注意到 **Area** 裡面有 **Spaces** 跟 **Regions** ，先講 **Spaces** 吧， **Space** 紀載了很多 **Area** 的屬性，他會根據 **Area** 的種類\(Editor Type\)不同，所以通常 **Spaces** 裡面通常只會有一個 **Space** 。這邊額外提一點，圖中有兩個Editor Type，上面的是比較general type，下面的是比較detailed type\(也就是我們通常在介面上能夠選的\)，舉例來說， _Shader Editor_ 跟 _Texture Node Editor_ 都是同一種 _Node Editor。_

另外 _3D Viewport_ ，有6個 **region** ，這邊就舉其中一個當例子


![](/assets/37c582b8c7ad/1*es3eJG8EWiLstMXiaMK9CA.png)



![3D viewport regions](/assets/37c582b8c7ad/1*o9eIXUrUy1wcdB6zFDLi9Q.png)

3D viewport regions

Regions Type _Window_ 就表示顯示3D物件的視窗。

那接下來介紹一下與python, C對應關係\(以當前狀態Context來看\)
#### Python:

**Context**


> bpy\.context 





**Screen**


> bpy\.context\.screen 





**Area**


> bpy\.context\.area 





**Space**


> bpy\.context\.space\_data 





**Region**


> bpy\.context\.region 





那如果是想要拿3D viewport的資訊，因為物件就是render到region\(view3d\_main\_region\_draw\( \) \)
#### Python:


> context = bpy\.context 





> v3d =context\.space\_data 





> rv3d = v3d\.region\_3d 




#### C:


> const DRWContextState \*draw\_ctx = DRW\_context\_state\_get\( \); 





> View3D \*v3d = draw\_ctx\-&gt;v3d; 





> RegionView3D \*rv3d = draw\_ctx\-&gt;rv3d; 





這邊可以發現所謂的v3d就是space，也就是area的資訊，他會放一些整個area會共用的資訊，例如說overlay\_setting


![overlay setting](/assets/37c582b8c7ad/1*nVssRN38jSllii4TYd9Abg.png)

overlay setting

他對應的code就是


> v3d\.overlay \#python 





> const View3DOverlay\* overlay = v3d\-&gt;overlay; //C 





因為overlay的東西牽涉到複數個region，所以這種東西要存在area裡面，那其他的資訊就可以放在rv3d，裡面就會存一些view matrix之類render到region需要用的資訊。



_[Post](https://medium.com/maochinn/blender-interface-37c582b8c7ad){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
