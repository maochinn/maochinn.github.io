---
title: "ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜â€Šâ€”â€Š05ï¼šProperty and Metadata"
author: "å¸½æ²"
date: 2025-02-05T15:28:12.261+0000
last_modified_at: 2025-02-27T07:22:15.106+0000
categories: ["Maochinn"]
tags: ["nvidia","omniverse","openusd"]
description: "åœ¨ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜â€Šâ€”â€Š04ï¼šPrims and Schemasä¸­æˆ‘å€‘å­¸åˆ°å¦‚ä½•ç›´æ¥vä¿®æ”¹.usdçš„å…§å®¹ä¾†å¢åŠ å’Œä¿®æ”¹layerä¸­çš„primï¼Œæœ¬ç¯‡å°‡æœƒåœ¨Omniverseå…§å»ºçš„Script Editorä¸­ï¼Œä½¿ç”¨OpenUSDâ€¦"
image:
  path: /assets/a7fa6a26a49a/1*ICKb_BFwpmxz-bRXHJp-zw.png
render_with_liquid: false
---

### ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 05ï¼šProperty and Metadata

English Version: [ã€Omniverseã€‘Development 102: Scripting Properties and Metadata](../b8e7a81710ee/)

åœ¨ [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 04ï¼šPrims and Schemas](../8a5581d9ef78/) ä¸­æˆ‘å€‘å­¸åˆ°å¦‚ä½•ç›´æ¥ä¿®æ”¹\.usdçš„å…§å®¹ä¾†å¢åŠ å’Œä¿®æ”¹layerä¸­çš„primï¼Œæœ¬ç¯‡å°‡æœƒåœ¨Omniverseå…§å»ºçš„Script Editorä¸­ï¼Œä½¿ç”¨OpenUSD APIä¾†èˆ‡primä¹ƒè‡³æ–¼stageä¸­æ‰€æœ‰è³‡æ–™äº’å‹•ï¼Œä½ å¯ä»¥ç†è§£ç‚ºé€éPython Scriptä¾†ä¿®æ”¹\.usdaæª”æ¡ˆï¼Œè€Œä¸æ˜¯åƒæˆ‘å€‘éå»ä¸€æ¨£æ˜¯æ‰‹å‹•ä¿®æ”¹å…§å®¹ã€‚
#### ç›®éŒ„
- Learn OpenUSD: Using Attributes
- Learn OpenUSD: Understanding Model Kinds
- Learn OpenUSD: Traversing Stages


è¦åœ¨Omniverseä¸­ä½¿ç”¨Script Editorï¼Œæ¯”è¼ƒæ–¹ä¾¿çš„æ–¹å¼æ˜¯é€édebugæ¨¡å¼ä¾†å•Ÿå‹•ï¼Œè©³ç´°å¯ä»¥åƒè€ƒ [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 00ï¼šKit\-based Development](../a54ae65f22bf/)
```bash
.\repo.bat launch -d
```

ç„¡è«–æ˜¯Composeré‚„æ˜¯Editorï¼Œå•Ÿå‹•å¾Œå¯ä»¥åœ¨Developer>Script Editorä¸­æ‰¾åˆ°


![Figure 1: Developer > Script Editor](/assets/a7fa6a26a49a/1*t-Vq5nGdmoOFK10jSxmkZQ.png)

Figure 1: Developer > Script Editor

Script Editoræ‰“é–‹å¾Œå¦‚å·¦åœ–ï¼Œå®ƒå¯ä»¥è®“ä½ å¿«é€Ÿå˜—è©¦ä¸€äº›APIçš„åŠŸèƒ½ï¼Œç•¶ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±å‰µå»ºä¸€å€‹extensionä¾†æ¸¬è©¦APIï¼Œé€™å€‹æ™‚å€™å¯ä»¥ä½¿ç”¨VS Code Linkï¼Œè®“ä½ èƒ½å¤ traceåˆ°åº•å±¤ï¼Œä½†æœ¬ç¯‡åªéœ€è¦ä½¿ç”¨Script Editorå³å¯ã€‚


![Figure 2: Script Editor](/assets/a7fa6a26a49a/1*tKA1MMTsIMc1h01QSXQtbw.png)

Figure 2: Script Editor
### Learn OpenUSD: Using Attributes

èª²ç¨‹ä¸­ä¸»è¦è«‡åŠå¦‚ä½•ä½¿ç”¨OpenUSD APIä¾†set/get primçš„attributeï¼Œèˆ‰ä¾‹ä¾†èªªå°±åƒæ˜¯ [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 04ï¼šPrims and Schemas](../8a5581d9ef78/) ä¸­ `Cube` çš„ `size` ï¼Œç•¶ç„¶æˆ‘å€‘å¯ä»¥é€éç›´æ¥äººå·¥ä¿®æ”¹\.usdaä¾†é”æˆï¼Œä¸éæˆ‘å€‘ä¹Ÿèƒ½é€éscriptä¾†è‡ªå‹•åŒ–çš„é‹ä½œã€‚

[**Course Detail \| NVIDIA**](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-19+V1){:target="_blank"} 
[_About Course Objectives Topics Covered Course Outline Stay Informed Contact Us_ learn\.nvidia\.com](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-19+V1){:target="_blank"}

æˆ‘å€‘å¯ä»¥å…ˆåˆ©ç”¨OpenUSD Python APIä¾†å‰µå»ºprimä¾†å°è©¦èº«æ‰‹ï¼Œé¦–å…ˆæ‰‹å‹•æŠŠæ•´å€‹stageä¸­çš„æ‰€æœ‰primæ¸…ç©ºï¼Œç„¶å¾Œåœ¨Script Editorè¼¸å…¥ä»¥ä¸‹scriptï¼Œæ¥è‘—æŒ‰ä¸‹Runï¼Œå¦‚Figure 2çš„å·¦ä¸‹è§’
```python
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()

scope = UsdGeom.Scope.Define(stage, "/Geometry")
xform = UsdGeom.Xform.Define(stage, scope.GetPath().AppendChild("GroupTransform"))
cube = UsdGeom.Cube.Define(stage, xform.GetPath().AppendChild("Box"))
```

æ‡‰è©²å¯ä»¥çœ‹åˆ°æ•´å€‹stageçš„çµæœå°±åƒæ˜¯ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#bf67){:target="_blank"} æ‰“é–‹çš„çµæœï¼Œæˆ‘å€‘å¯ä»¥å°‡å…¶å­˜æˆå¦ä¸€å€‹\.usdaï¼Œä¸¦ä¸”æ¯”å°ä¸€ä¸‹ã€‚


![](/assets/a7fa6a26a49a/1*ICKb_BFwpmxz-bRXHJp-zw.png)


çµæœçš„å¤§æ¦‚åƒæ˜¯ä¸‹é¢çš„å…§å®¹ï¼Œå°±åƒæ˜¯æŠŠ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} æ”¾é€²Omniverseå†å„²å­˜ä¸€æ¨£ï¼Œå¯ä»¥åƒè€ƒä¹‹å‰çš„ [çµæœ](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#bf67){:target="_blank"} ï¼Œä¸Šé¢æœƒæœ‰ä¸€å¤§å †Omniverseç”¢ç”Ÿå‡ºä¾†çš„è¨­å®šã€‚
```python
#usda 1.0
(
    customLayerData = {
        #...
    }
    #...
)

def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box"
        {
        }
    }
}
```

ä»¥æ­¤æˆ‘å€‘å¤§æ¦‚å°æ–¼ä½¿ç”¨OpenUSD APIæœ‰ä¸€å€‹åˆæ­¥çš„èªè­˜ï¼Œæˆ‘å€‘å¯ä»¥æ‰‹å‹•å»ºç«‹\.usdï¼Œä¹Ÿå¯ä»¥é€éAPIå»ºç«‹\.usdï¼ŒåŒæ™‚ï¼Œæ—¢ç„¶æˆ‘å€‘å¯ä»¥æ‰‹å‹•ä¿®æ”¹primçš„dataï¼Œå°±åƒ [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 04ï¼šPrims and Schemas](../8a5581d9ef78/) ä¸­åšåˆ°çš„ï¼Œæˆ‘å€‘è‡ªç„¶ä¹Ÿå¯ä»¥é€éAPIåšåˆ°é¡ä¼¼çš„äº‹æƒ…ï¼Œé¦–å…ˆï¼Œæˆ‘å€‘å¾Propertyçš„Attributesé–‹å§‹ã€‚
#### Attributes

äº‹å¯¦ä¸Šï¼Œprimä¸­çš„â€real dataâ€åˆ†æˆå…©é¡ï¼ŒProperty and Metadataã€‚

å…¶ä¸­Attributeså±¬æ–¼Propertyï¼Œå°±å¦‚åŒåœ¨ [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 03ï¼šOpenUSDä¸­](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#7738){:target="_blank"} æåˆ°çš„ï¼Œé‚£éº¼é€™é‚Šä¸€æ¨£ä½¿ç”¨ç¥–å‚³çš„ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} ä¾†èˆ‰ä¾‹ï¼Œåœ¨è£¡é ­å¢åŠ ä¸€å€‹ç°¡å–®çš„Attributesï¼Œå°±è·Ÿ [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 04ï¼šPrims and Schemas](../8a5581d9ef78/) ä¸­åšçš„äº‹æƒ…é¡ä¼¼ï¼Œå¢åŠ ä¸€å€‹å‹æ…‹æ˜¯ `double` çš„ `size` ï¼Œè¤‡è£½ä¸‹é¢çš„è…³æœ¬åˆ°Script Editorä¸¦ä¸”Runã€‚
```css
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()

scope = UsdGeom.Scope.Define(stage, "/Geometry")
xform = UsdGeom.Xform.Define(stage, scope.GetPath().AppendChild("GroupTransform"))
cube = UsdGeom.Cube.Define(stage, xform.GetPath().AppendChild("Box"))

size_attr = cube.GetPrim().CreateAttribute("size", Sdf.ValueTypeNames.Double)
size_attr.Set(1.0)
```

çµæœæ‡‰è©²æœƒçœ‹åˆ° `"Box"` è®Šå¤§äº†ï¼Œå„²å­˜å¾Œçµæœå¦‚ä¸‹
```python
#usda 1.0
(
    customLayerData = {
        #...
    }
    #...
)

def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box"
        {
            double size = 4
        }
    }
}
```

åŸºæœ¬ä¸Šå°±åšä¸€è·Ÿä¹‹å‰ä¸€æ¨£ç°¡å–®çš„äº‹æƒ…ã€‚åŒæ™‚ï¼Œå¯ä»¥ç™¼ç¾ä¸€ä»¶äº‹æƒ…ï¼Œè…³æœ¬çš„å‰åŠæ®µæ˜¯åœ¨define primï¼Œå¾ŒåŠæ®µåœ¨è¨­å®šprimçš„attributeä¸­çš„å€¼ï¼Œå¦‚æœå ´æ™¯ä¸­å·²ç¶“æœ‰primäº†ï¼Œæ¯”è¼ƒç†æƒ³çš„åšæ³•æ˜¯ç”¨getçš„
```python
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")

if box_prim:
    size_attr = box_prim.CreateAttribute("size", Sdf.ValueTypeNames.Double)
    size_attr.Set(1.0)
```

é€™æ¨£scriptå°±å–®ç´”å¤šäº†ï¼Œè®“æˆ‘å€‘é‡æ–°å°ˆæ³¨åœ¨ä¿®æ”¹attributeçš„éƒ¨åˆ†ï¼Œå¯ä»¥æ³¨æ„åˆ°æˆ‘å€‘è¨­å®švalueä¹‹å‰ï¼Œå¿…é ˆè¦å…ˆå‰µå»ºï¼Œæˆ–è€…èªªæ˜¯getåˆ° `size` é€™å€‹attributeï¼Œæ‰èƒ½é€²ä¸€æ­¥å»è¨­å®šã€‚

é€™ç¨®ä½œæ³•éå¸¸ç›´è¦ºï¼Œä½ æƒ³å‰µå»ºä»»ä½•çš„Attributeéƒ½å¯ä»¥ï¼Œç„¡è«–åˆæ³•èˆ‡å¦ï¼Œæ›è¨€ä¹‹ï¼Œå¦‚æœä½ ä¸å°å¿ƒåç¨±å¯«éŒ¯ï¼Œæ¯”å¦‚å¯«æˆ `s1ze` ï¼Œä»–ä¸æœƒæœ‰ä»»ä½•å ±éŒ¯ï¼Œä½†æ˜¯ç•«é¢ä¸­çš„ `"Box"` å°±æ˜¯æ¯«ç„¡åæ‡‰ï¼Œå¦‚æœæˆ‘å€‘å„²å­˜å¾Œæœƒç™¼ç¾
```python
#usda 1.0
(
    customLayerData = {
        #...
    }
    #...
)

def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box"
        {
            custom double s1ze = 4
        }
    }
}
```

æ­¤è™•å¯ä»¥æ³¨æ„åˆ°ï¼Œ `s1ze` çš„ç¢ºè¢«å‰µå»ºäº†ï¼Œä½†åŒæ™‚å¯ä»¥ç™¼ç¾ï¼Œåœ¨ `s1ze` å‰é¢å¤šäº† `custom` ï¼Œæ„æ€å°±æ˜¯é€™å€‹attræ˜¯ä½¿ç”¨è€…è‡ªå‰µçš„ï¼Œæ²’æœ‰é è¨­çš„ç”¨é€”ï¼Œä¹Ÿå°±æ˜¯Omniverseç„¡æ³•è­˜åˆ¥é€™å€‹attrå°æ‡‰çš„åŠŸèƒ½ï¼Œå› æ­¤ï¼Œæ¯”è¼ƒæ¨è–¦çš„åšæ³•é‚„æ˜¯é€é [IsA Schema](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-04-working-with-prims-and-default-schemas-8a5581d9ef78#1e4f){:target="_blank"}
```python
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")

if box_prim:
  cube = UsdGeom.Cube(box_prim)
  size_attr = cube.CreateSizeAttr()
  size_attr.Set(4.0)
```

æ›´å…·é«”ä¾†èªªï¼Œæ˜¯Cube Schemaï¼Œå› ç‚º `"Box"` å°±æ˜¯ä¸€å€‹Cubeï¼Œæ‰€ä»¥é¦–å…ˆæˆ‘å€‘è¦å…ˆå°‡Boxå¾ä¸€å€‹å–®ç´”çš„primï¼Œè½‰æ›æˆ `UsdGeom.Cube` é€™å€‹schemaæ¶æ§‹ä¸‹çš„primï¼Œæˆ‘å€‘æ‰èƒ½å° `"Box"` ä½¿ç”¨ `UsdGeom.Cube` é€™å€‹schemaä¸­è¨­è¨ˆçš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯ `CreateSizeAttr()` ã€‚

å› ç‚ºCube Schemaä¸­ä½¿ç”¨ `size` é€™å€‹attrçš„valueä¾†æ”¹è®ŠCubeçš„å¤§å°ï¼Œå› æ­¤Schemaæœ‰æä¾› `CreateSizeAttr()` é€™å€‹æ–¹æ³•ï¼Œä¾†å¹«æˆ‘å€‘å»ºç«‹å°æ‡‰çš„attrï¼Œæ•´å€‹éç¨‹æˆ‘å€‘ä¸éœ€è¦çŸ¥é“æ­£ç¢ºçš„attråç¨±ï¼Œåªéœ€è¦ä½¿ç”¨APIå°±èƒ½ç¢ºä¿æˆ‘å€‘èƒ½å¤ å‰µå»ºæ­£ç¢ºçš„Attrã€‚

ç”¨Schemaæä¾›çš„æ–¹æ³•å¥½è™•é™¤äº†åç¨±ä¸æœƒå¯«éŒ¯ï¼Œå¦å¤–å°±æ˜¯æ¯”è¼ƒæœ‰å¯è®€æ€§ï¼Œç•¶ç„¶é‚„æœ‰å…¶ä»–å¥½è™•ï¼Œå¾Œé¢æ›´è¤‡é›œçš„ä¾‹å­å¯ä»¥èªªæ˜ã€‚ç¸½ä¹‹ï¼Œç†è«–ä¸Šå…©è€…åšæ³•éƒ½å¯ä»¥ï¼Œä½†å¯ä»¥æ³¨æ„åˆ°ï¼Œé€™é‚Šæˆ‘å€‘æ˜¯å…ˆå‰µå»ºäº†attributeï¼Œæ‰å»è¨­å®šå€¼ï¼Œåä¹‹ï¼Œå¦‚æœæˆ‘å€‘è¦å–å¾—valueï¼Œä¹Ÿè¦å…ˆå–å¾—attributeæ‰èƒ½å†å–å¾—valueã€‚
```python
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")

if box_prim:
  cube = UsdGeom.Cube(box_prim)
  size_attr = cube.CreateSizeAttr()
  size_attr.Set(4.0)

  # Get the size, display color, and extent attributes of the cube
  cube_size: Usd.Attribute = cube.GetSizeAttr()
  print(f"Size: {cube_size.Get()}")
```

ä¹‹å¾Œï¼Œä¸‹ä¸€å€‹ç¨å¾®è¤‡é›œçš„æ“ä½œï¼Œå°‡ `"Box"` ç§»å‹•åˆ°ç‰¹å®šçš„ä½ç½®ï¼Œæ›è¨€ä¹‹ï¼Œå°±æ˜¯è¨­å®šTranslateï¼Œæˆ–è€…æ›´ç²¾ç¢ºåœ°ä¾†èªªï¼Œæ˜¯è¨­å®šTransformationä¸­çš„Translateã€‚ä¾æ¨£ç…§è‘«è˜†çš„åšæ³•åƒæ˜¯
```python
from pxr import Usd, UsdGeom, Sdf, Gf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")

if box_prim:
  xformable = UsdGeom.Xformable(box_prim)
  translate_op = xformable.AddTranslateOp()
  translate_op.Set(Gf.Vec3f(1, 2, 3))
```

æˆ‘å€‘è¦å°‡ `"Box"` ç§»å‹•åˆ°\(1, 2, 3\)é€™å€‹ä½ç½®ï¼Œå¯ä»¥åˆ©ç”¨ `UsdGeom.Xformable` é€™å€‹Schemaï¼ŒåŸ·è¡Œå„²å­˜å¾Œå¯ä»¥ç™¼ç¾å¤šå‡ºä¾†çš„atträ¸åªä¸€é …
```python
#usda 1.0
(
    customLayerData = {
        #...
    }
    #...
)

def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box"
        {
            double3 xformOp:translate = (1, 2, 3)
            uniform token[] xformOpOrder = ["xformOp:translate"]
        }
    }
}
```

å…¶å¯¦ä¹‹å‰ä¹Ÿçœ‹éé¡ä¼¼çš„ [çµæœ](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#bf67){:target="_blank"} ã€‚ `xformOp:translate` å°±æ˜¯è¦è¨­å®šçš„ä½ç½®ï¼Œé™¤æ­¤ä¹‹å¤–é‚„æœ‰ `xformOpOrder` ï¼Œç°¡å–®ä¾†èªªï¼Œ `xformOp` ç¸½å…±æœ‰ä¸‰ç¨®Opï¼Œåˆ†åˆ¥æ˜¯scale, rotate and translateï¼Œä¸‰ç¨®Operatoræ²’æœ‰äº¤æ›å¾‹ï¼Œå› æ­¤orderå¾ˆé‡è¦ï¼Œåªè¦ç‰½æ¶‰åˆ°transformationå°±å¿…é ˆå…·å‚™ `xformOpOrder` é€™å€‹attrã€‚

æ­¤æ™‚å¯ä»¥ç™¼ç¾ [IsA Schema](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-04-working-with-prims-and-default-schemas-8a5581d9ef78#1e4f){:target="_blank"} çš„å„ªé»ï¼Œå°±ç®—ä½ ä¸çŸ¥é“Attrç¢ºåˆ‡çš„åç¨±æˆ–è€…é€£å¸¶çš„Atträ½ ä¹Ÿèƒ½å¤ æ­£å¸¸çš„ä½¿ç”¨åŠŸèƒ½ï¼Œé›–ç„¶ä½ ä»éœ€è¦çŸ¥é“functionçš„åç¨±ï¼Œä½†æ˜¯æ‰“éŒ¯å­—æœƒæœ‰éŒ¯èª¤æé†’ã€‚ç•¶ç„¶ï¼Œäº‹æƒ…ä¸ç¸½æ˜¯é€™éº¼ç¾å¥½ï¼Œåœ¨Pythonçš„APIä¸­è¦get `xformOp:translate` å°±ç•¥é¡¯å›‰å—¦ã€‚
```css
from pxr import Usd, UsdGeom, Sdf, Gf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")
xformable = UsdGeom.Xformable(box_prim)
    
translate_op = None
for op in xformable.GetOrderedXformOps():
    if op.GetOpType() == UsdGeom.XformOp.TypeTranslate:
        translate_op = op
        break
    
if translate_op:
  translate_attr = translate_op.GetAttr()
  translate_value = translate_attr.Get()
  print(translate_value)
```

å¦‚æœæƒ³è¦æ‹¿åˆ°translateç¢ºåˆ‡çš„valueï¼Œæˆ‘å€‘å¿…é ˆè¦å…ˆæ‹¿åˆ°æ‰€æœ‰çš„ `xformOp` ï¼Œç„¶å¾Œå†ä¾æ“šå‹æ…‹è¾¨åˆ¥å‡º `xformOp:translate` ï¼Œç„¶å¾Œå–å¾—attributeï¼Œæœ€å¾Œå†æ‹¿åˆ°valueã€‚

ç•¶ç„¶ï¼Œæˆ‘å€‘é‚„æ˜¯å¯ä»¥ä½¿ç”¨æ¯”è¼ƒä¸€èˆ¬æ€§çš„æ–¹æ³•
```css
from pxr import Usd, UsdGeom, Sdf, Gf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")
xformable = UsdGeom.Xformable(box_prim)

if box_prim:
    translate_attr = prim.GetAttribute("xformOp:translate")
    translate_value = translate_attr.Get()
```

åŸºæœ¬ä¸Šå¯é”åˆ°ä¸€æ¨¡ä¸€æ¨£çš„çµæœï¼Œå¦‚æœä½ äº‹å…ˆçŸ¥é“attrçš„é‹ä½œæ–¹å¼ï¼Œé€™ç¨®åšæ³•ç”šè‡³è¼ƒç‚ºæ–¹ä¾¿ï¼Œä½ å¯ä»¥é€é `GetAttribute` ç›´æ¥æ‹¿åˆ°æŒ‡å®šçš„attrï¼Œç•¶ç„¶ï¼Œå¦‚æœä½ çœŸçš„å¾ˆæ‡¶å¯ä»¥ç›´æ¥é€é `CreatAttribute` ä¾†ç›´æ¥å‰µå»ºä¸€å€‹æ–°çš„å»è¦†è“‹æ‰èˆŠçš„ï¼Œç„¶å¾Œç›´æ¥å‘¼å«get/setä¾†åšå¾ŒçºŒçš„æ“ä½œã€‚

ç¸½ä¹‹ï¼Œç›¸è¼ƒæ–¼æ‰‹å‹•ä¿®æ”¹\.usdï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥æ’°å¯«è…³æœ¬å‘¼å«OpenUSD APIï¼Œç„¶å¾ŒAPIçš„ç¨‹å¼ç¢¼å†å»ä¿®æ”¹\.usdã€‚

ç›®å‰é‡å°ä½¿ç”¨è…³æœ¬ä¿®æ”¹Atträ¸»è¦ä»‹ç´¹äº†å…©ç¨®æ–¹å¼ï¼Œä¸€ç¨®å°±æ˜¯åˆ©ç”¨ [IsA Schema](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-04-working-with-prims-and-default-schemas-8a5581d9ef78#1e4f){:target="_blank"} ï¼Œä¾‹å¦‚ `UsdGeom.Cube` ä»¥åŠ `UsdGeom.Xformable` æä¾›çš„æ–¹æ³•ä¾†ä¿®æ”¹ï¼Œå¦ä¸€ç¨®å‰‡æ˜¯ç”¨ç›´æ¥ä½¿ç”¨ `Usd.Prim` çš„æ–¹æ³•ä¾†ä¿®æ”¹ï¼Œä¹Ÿå°±æ˜¯ `CreatAttribute()` ã€‚å‰è€…é›–ç„¶å¯èƒ½æ¯”è¼ƒå›‰å—¦ï¼Œä½†å¥½è™•åœ¨æ–¼ï¼Œå¦‚æœæœªä¾†Schemaçš„é‹ä½œæ–¹å¼ç™¼ç”Ÿè®ŠåŒ–ï¼Œä¾‹å¦‚Attrçš„åç¨±æ”¹è®Šæˆ–æ˜¯æ–°å¢å…¶ä»–Attræ™‚ï¼Œæˆ‘å€‘ä¸éœ€è¦ä¿®æ”¹codeï¼Œåªè¦å‘¼å«æœ€æ–°ç‰ˆæœ¬çš„æ–¹æ³•å³å¯ï¼ŒåŒæ™‚å‘¼å«æ–¹æ³•ä¹Ÿè®“codeæ•´é«”å¯è®€æ€§è®Šé«˜ã€‚å¾Œè€…çš„å¥½è™•åœ¨æ–¼å¯ä»¥æ›´ç›´æ¥çš„æ“ä½œdataï¼Œæ›´æ¥è¿‘æ–¼æ‰‹å‹•ä¿®æ”¹æª”æ¡ˆï¼Œé©åˆç”¨åœ¨debugã€‚

äº‹å¯¦ä¸Šï¼Œä¸€æ¨£ä»¥ç§»å‹•primç‚ºä¾‹ï¼Œæ˜¯ä¸€å€‹æ›´ç²¾è§£çš„ä½œæ³•ï¼Œä¹Ÿå°±æ˜¯å®˜æ–¹èª²ç¨‹æä¾›çš„åšæ³•
```css
from pxr import Usd, UsdGeom, Sdf, Gf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")

UsdGeom.XformCommonAPI(box_prim).SetTranslate(Gf.Vec3d(1, 2, 3))
```

é€™å€‹æ–¹å¼å°±æ˜¯åœ¨ [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 04ï¼šPrims and Schemas](../8a5581d9ef78/) é‚„æœ‰æåˆ° [API Schema](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-04-working-with-prims-and-default-schemas-8a5581d9ef78#4fde){:target="_blank"} ï¼Œåªéœ€è¦ä¸€è¡Œå³å¯ï¼Œä½†é€™ç¨®æ–¹æ³•é€šå¸¸åªæœ‰å¸¸è¦‹åŠŸèƒ½æœƒæœ‰APIå¯ä»¥ä½¿ç”¨ï¼ŒåŒæ™‚ï¼Œé€™ä¹Ÿä¸å…è®“äººè¦ºå¾—å›°æƒ‘ï¼Œé”æˆä¸€æ¨£çš„åŠŸèƒ½çš„æ–¹æ³•æœ‰é€™éº¼å¤šç¨®ï¼Œç©¶ç«Ÿè¦ç”¨å“ªç¨®æ–¹æ³•æ¯”è¼ƒå¥½ï¼Ÿäº‹å¯¦ä¸Šï¼Œæˆ‘å‰›å‰›åˆ—èˆ‰åªæ˜¯OpenUSDçš„æ–¹æ³•ï¼ŒOmniverse kitä¹Ÿæœ‰è‡ªå·±çš„APIå¯ä»¥åšåˆ°é¡ä¼¼çš„äº‹æƒ…ï¼Œå› æ­¤é€™å€‹å•é¡Œè¶…å‡ºæœ¬æ–‡ç¯„åœï¼Œä¹‹å¾Œå†ä»‹ç´¹ã€‚

ç¸½ä¹‹ï¼Œè¦å¢åŠ ã€èª¿æ•´Attributeæœ‰å¾ˆå¤šæ‰‹æ®µï¼Œæœ€æ ¹æœ¬çš„æ–¹æ³•æ˜¯ç›´æ¥ä¿®æ”¹\.usdï¼Œæˆ–æ˜¯å‘¼å«è¨­è¨ˆå¥½çš„APIä¾†ä¿®æ”¹\.usdï¼Œé€™æ¨£æœƒé¿å…å¾ˆå¤šäººå·¥ä¸Šçš„å¤±èª¤ï¼Œç•¶ç„¶ä½ ä¹Ÿå¯ä»¥é€éOmniverseçš„ä»‹é¢ä¾†äº’å‹•ï¼Œä½†å¯¦éš›ä¸ŠèƒŒå¾Œä¹Ÿæ˜¯å‘¼å«APIï¼Œç›¸å°çš„ï¼Œå¦‚æœä½ æœƒä½¿ç”¨APIä¹Ÿå¯ä»¥åšåˆ°ä¸€æ¨£çš„äº‹æƒ…ï¼ŒåŒæ™‚ä¹Ÿèƒ½å®¢è£½åŒ–çš„æ’°å¯«è‡ªå·±çš„è…³æœ¬ç”šè‡³ä»‹é¢ä¸Šæ²’æœ‰çš„åŠŸèƒ½ã€‚

[**Universal Scene Description: UsdGeomXformable Class Reference**](https://openusd.org/dev/api/class_usd_geom_xformable.html#ad6dfc740dcec052482489647af9ed36b){:target="_blank"} 
[_Base class for all transformable prims, which allows arbitrary sequences of component affine transformations to beâ€¦_ openusd\.org](https://openusd.org/dev/api/class_usd_geom_xformable.html#ad6dfc740dcec052482489647af9ed36b){:target="_blank"}
#### Relationship

Propertyä¸­é™¤äº†Attributesä»¥å¤–å°±æ˜¯Relationshipï¼Œä¸€å®šç¨‹åº¦ä¸Šï¼Œä½ å¯ä»¥å°‡Relationshipç•¶ä½œæ˜¯ç‰¹æ®Šçš„Attributesï¼Œåªæ˜¯å®ƒå„²å­˜çš„æ˜¯pointerï¼Œä»–å°‡æŒ‡å‘stageä¸­çš„primï¼Œæˆ‘å€‘å¯ä»¥è©¦è‘—æ‰“é–‹ [_Layout\.usda_](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#188a){:target="_blank"} å¾ŒåŸ·è¡Œè…³æœ¬ï¼š
```css
from pxr import Usd, UsdGeom, Sdf, Gf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")
world_prim = stage.GetPrimAtPath("/World")

custom_relationship: Usd.Relationship = box_prim.CreateRelationship("myCustomRelationship")
custom_relationship.SetTargets(["/World"])
```

æˆ‘å€‘åœ¨ `"Box"` å„²å­˜ä¸€å€‹relationshipï¼Œè£¡é ­å„²å­˜è‘— `"World"` çš„ä½ç½®ï¼Œå¦‚æœå…‰å¾è…³æœ¬ä¸Šè§€å¯Ÿï¼Œä½ ç”šè‡³å¯ä»¥èªç‚ºRelationshipå°±æ˜¯ä¸€å€‹å„²å­˜stringçš„Attributesï¼Œä½†æ˜¯å„²å­˜å¾Œæª¢è¦– [_Layout\.usda_](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#188a){:target="_blank"} æŸ¥çœ‹å·®ç•°
```python
#usda 1.0

#...

over "Geometry"
{
    over "GroupTransform"
    {
        over "Box"
        {
            rel myCustomRelationship = </World>

        }
    }
}
```

çœ‹èµ·ä¾†å°±ä¸åƒæ˜¯å–®ç´”çš„å­—ä¸²ï¼Œäº‹å¯¦ä¸Šï¼ŒrelationshipæŒ‡å‘çš„æ˜¯ **stage** ä¸­ç‰¹å®šprimï¼Œæ›è¨€ä¹‹ï¼Œé€™å€‹primå¯èƒ½ç”±ä¸åŒçš„layer composeè€Œæˆï¼Œä¸æ˜¯ç‰¹å®šlayeræˆ–è€…èªªç‰¹å®š\.usdä¸­çš„primã€‚

ä½†æ˜¯relationshipæœ¬èº«æ²’æœ‰ç‰¹åˆ¥çš„ç”¨é€”ï¼Œæ˜¯ä¾›å¾ŒçºŒä½¿ç”¨è©²primçš„äººçŸ¥é“èˆ‡å…¶æœ‰é—œçš„primå…·é«”æ˜¯å“ªäº›ï¼Œå› æ­¤é€šå¸¸ä¸å¤§å¸¸å‡ºç¾ï¼Œå°¤å…¶åœ¨ç°¡å–®çš„ã€ä¸æ¶‰åŠè…³æœ¬çš„å°ˆæ¡ˆä¸­ã€‚

[**Create a Relationship \- Omniverse Developer Guide**](https://docs.omniverse.nvidia.com/dev-guide/latest/programmer_ref/usd/properties/create-relationship.html){:target="_blank"} 
[_Universal Scene Description \(OpenUSD\) code samples for creating a Relationship\._ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/dev-guide/latest/programmer_ref/usd/properties/create-relationship.html){:target="_blank"}

[**Universal Scene Description: UsdRelationship Class Reference**](https://openusd.org/release/api/class_usd_relationship.html){:target="_blank"} 
[_A UsdRelationship creates dependencies between scenegraph objects by allowing a prim to target other prims, attributesâ€¦_ openusd\.org](https://openusd.org/release/api/class_usd_relationship.html){:target="_blank"}
#### Metadata

Primä¸­é™¤äº†å„²å­˜Propertyå¤–ï¼Œé‚„å¯ä»¥å„²å­˜Metadataï¼Œé¡§åæ€ç¾©ï¼Œå®ƒæ˜¯dataçš„dataï¼Œåƒæ˜¯åšå‡ºé€™ç­†è³‡æ–™çš„ä½œè€…åç¨±ã€é‡å°é€™ç­†è³‡æ–™çš„è¨»é‡‹ï¼Œä¹Ÿå°±æ˜¯è£œå……èªªæ˜é€™å€‹primçš„dataï¼Œä¹è½ä¹‹ä¸‹ï¼Œå½¢å¼ä¸Šèˆ‡attributeå·®ä¸å¤šï¼Œå¯èƒ½è¦ºå¾—é€™èˆ‡attributeçš„åŠŸèƒ½é¡ä¼¼ï¼Œä½†æ˜¯metadataèˆ‡attributeä¸åŒï¼Œå› ç‚ºmetadataä¸éœ€è¦resolveã€interpolateï¼Œæ›è¨€ä¹‹ï¼Œmetadataå¤§å¤šä¸æœƒæ›´å‹•ï¼Œä½†æ˜¯å¯ä»¥è¢«è¦†è“‹ã€‚

[**Universal Scene Description: Object Model and How the Classes Work Together**](https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata){:target="_blank"} 
[_An SdfLayer provides the interface to a persistent \(in a file\) or in\-memory only \(via â€œanonymousâ€ layers\) container ofâ€¦_ openusd\.org](https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata){:target="_blank"}

å¦ä¸€å€‹ä¸åŒçš„åœ°æ–¹åœ¨æ–¼ï¼Œmetadataä¸èƒ½éš¨ä¾¿å®¢è£½åŒ–å–åï¼Œå› ç‚ºä»–æ˜¯ _strongly typed_ ï¼Œæ›è¨€ä¹‹ï¼Œåªæœ‰è¨»å†Šéçš„ä¿ç•™å­—å¯ä»¥ç”¨ã€‚

[**Universal Scene Description: Object Model and How the Classes Work Together**](https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata){:target="_blank"} 
[_An SdfLayer provides the interface to a persistent \(in a file\) or in\-memory only \(via â€œanonymousâ€ layers\) container ofâ€¦_ openusd\.org](https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata){:target="_blank"}

èˆ‰å€‹ä¸€èˆ¬çš„ä¾‹å­ä¾†èªªï¼Œcommentå°±å±¬æ–¼metadataï¼Œé–‹å•Ÿ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} å¾ŒåŸ·è¡Œè…³æœ¬ï¼Œæˆ‘å€‘åœ¨ `"Box"` ä¸­æ·»åŠ ä¸€äº›æè¿°
```python
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")

if box_prim:
  box_prim.SetMetadata('comment', "A prim of Cube")
  print(box_prim.GetMetadata('comment'))
```

å„²å­˜å¾ŒæŸ¥çœ‹\.usdaå¯ä»¥ç™¼ç¾primåç¨±å¾Œå¤šäº†æ‹¬èƒ¡ï¼Œå…¶ä¸­çš„è³‡æ–™å°±å±¬æ–¼metadataã€‚
```python
def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box" (
            "A prim of Cube"
        )
        {
        }
    }
}
```

ç•¶ç„¶ï¼Œmetadataä¸åªæœ‰é€™ç¨®ï¼Œæ¥ä¸‹ä¾†å°‡ä»‹ç´¹å…¶ä»–å…©ç¨®metadata
### Learn OpenUSD: Understanding Model Kinds

èª²ç¨‹ä»‹ç´¹äº†ä¸€ç¨®ç›¸å°å¸¸ç”¨çš„metadataï¼Œkindï¼Œå…¶åˆ†ç‚ºgroup, assembly, and componentï¼Œèªªç™½äº†å°±æ˜¯è®“äººè‡ªå·±å»å®šç¾©æ¯å€‹primçš„å±¤ç´šï¼Œkindå°±æ˜¯primåœ¨hierarchyä¸­çš„Categoriesã€‚

èˆ‰ä¾‹ä¾†èªªï¼Œå®¶å…·æ˜¯componentï¼ŒåŸºæœ¬ä¸Šå·²ç¶“æ˜¯åŸºæœ¬å–®ä½äº†ï¼Œä¸èƒ½å†åˆ†å‰²ï¼Œç•¶ç„¶é‚„æ˜¯æœ‰subcomponentå¯ä»¥ç”¨ï¼Œæ•¸å€‹å®¶å…·å¯ä»¥groupèµ·ä¾†ï¼Œæ•´å€‹å»ºç¯‰ç‰©å‰‡æ˜¯assemblyã€‚

[**Course Detail \| NVIDIA**](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-22+V1){:target="_blank"} 
[_About Course Objectives Topics Covered Course Outline Stay Informed Contact Us_ learn\.nvidia\.com](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-22+V1){:target="_blank"}

ä¸€ç¨®ç›´ç™½çš„è§£é‡‹å°±æ˜¯æ¯å€‹priméƒ½æœ‰å€‹tagï¼Œå«åškindï¼Œå¯ä»¥å¡«çš„å€¼å°±æ˜¯group, assembly, component and subcomponentå››ç¨®ï¼Œä½†æ˜¯ç”šéº¼æ¨£çš„primå±¬æ–¼å“ªä¸€ç¨®åŸºæœ¬ä¸Šå¯ä»¥è‡ªå·±æ±ºå®šï¼Œæ›è¨€ä¹‹ï¼Œé€™éœ€è¦è·Ÿåœ˜éšŠæºé€šï¼ŒåŒæ­¥å¥½å¤§å®¶çš„å…±è­˜ï¼Œå¦å‰‡é€™å€‹kindæ²’ä»€éº¼å¯¦è³ªæ•ˆç›Šã€‚

æ›è¨€ä¹‹ï¼Œæ¯å€‹primçš„kindå®Œå…¨å±¬æ–¼è‡ªå®šç¾©ï¼Œç”šè‡³å¯ä»¥ä¸å®šç¾©ï¼Œå› ç‚ºé€™å€‹kindæ²’æœ‰æ¨™æº–ç­”æ¡ˆï¼Œåªéœ€è¦åœ˜éšŠæœ‰å…±è­˜å³å¯ã€‚


![](/assets/a7fa6a26a49a/1*VxEiWi94C6kSr9k3zx5U2Q.png)


åœ¨Omniverseçš„Propertyä¸­å¯ä»¥æ‰¾åˆ°primçš„Kind\(é›–ç„¶å®ƒä¸¦éProperty\)ï¼Œç¸½å…±æœ‰å››å€‹é¸é …å¯ä»¥é¸æ“‡ï¼Œæˆ‘å€‘å¯ä»¥å†æ¬¡ä½¿ç”¨ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} ä¾†èˆ‰ä¾‹ï¼Œå°‡ `"Box"` è¨­å®šæˆgroupå¾Œå„²å­˜
```python
#usda 1.0

#...

def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box" (
            kind = "group"
        )
        {
        }
    }
}
```

é‚£å¦‚æœæˆ‘å€‘æƒ³è¦è…³æœ¬åšåˆ°å‘¢ï¼Ÿå‡è¨­æˆ‘å€‘æƒ³æŠŠkindæ›æˆsubcomponent
```css
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")
if box_prim:
 box_prim.SetMetadata('kind', "subcomponent")
 print(box_prim.GetMetadata('kind'))
```

å„²å­˜å¾Œå°±å¯ä»¥æŸ¥çœ‹\.usda
```python

def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box" (
            kind = "subcomponent"
        )
        {
        }
    }
}
```

åªæ˜¯é€™é‚Šè¦æ³¨æ„ `SetMetadata()` ä¸­ç¬¬ä¸€å€‹åƒæ•¸ï¼Œä¹Ÿå°±æ˜¯metadataçš„åç¨±å¦‚æœéš¨æ„å–åæœƒè·³å‡ºéŒ¯èª¤\(Unregistered metadata key\)ï¼Œé€™æ˜¯å› ç‚ºå¦‚å‰é¢æ‰€è¿°metadataçš„ç¨®é¡æ˜¯äº‹å…ˆè¨­è¨ˆå¥½çš„ï¼Œä¸èƒ½éš¨ä¾¿å¢åŠ ç¨®é¡ã€‚

ä½†æˆ‘å€‘æ²’æœ‰å¿…è¦ä½¿ç”¨åˆ°æ‰€æœ‰çš„metadataï¼Œæœ¬ç¯‡æœ€å¾Œåœ¨ä»‹ç´¹ä¸€ç¨®metadataï¼Œactiveã€‚
### Learn OpenUSD: Traversing Stages

æœ¬ç¯‡æ•™å­¸ä¸­æœƒç¤ºç¯„å¦‚ä½•ç”¨è…³æœ¬éæ­·æ•´å€‹stageä¸­æ‰€æœ‰çš„primï¼Œä½†æ˜¯åœ¨éç¨‹ä¸­æœƒä»‹ç´¹åˆ°activeé€™å€‹metadataï¼Œå®ƒæœƒå½±éŸ¿éæ­·stageæ™‚æ˜¯å¦æœƒè€ƒæ…®è©²Primã€‚

[**Course Detail \| NVIDIA**](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-21+V1){:target="_blank"} 
[_About Course Objectives Topics Covered Course Outline Stay Informed Contact Us_ learn\.nvidia\.com](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-21+V1){:target="_blank"}

ä¸€æ¨£æ‰“é–‹ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} å¾ŒåŸ·è¡Œè…³æœ¬
```python
from pxr import Usd, UsdGeom, Sdf

stage = omni.usd.get_context().get_stage()
for prim in stage.Traverse():
 print(prim.GetPath().pathString)
```

è…³æœ¬å¾ˆç°¡å–®çš„ç”¨ä¸€å€‹for loopå»éæ­·æ‰€æœ‰çš„primï¼Œæˆ‘å€‘é æœŸçš„è¼¸å‡ºæ˜¯ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} ä¸­çš„ä¸‰å€‹primï¼Œä½†æ˜¯å¯¦éš›è¼¸å‡ºå¦‚ä¸‹
```bash
/Geometry
/Geometry/GroupTransform
/Geometry/GroupTransform/Box
/OmniverseKit_Persp
/OmniverseKit_Front
/OmniverseKit_Top
/OmniverseKit_Right
/OmniKit_Viewport_LightRig
/OmniKit_Viewport_LightRig/Lights
/OmniKit_Viewport_LightRig/Lights/DomeLight
/OmniKit_Viewport_LightRig/Lights/DistantLight
/Render
/Render/OmniverseKit
/Render/OmniverseKit/HydraTextures
/Render/OmniverseKit/HydraTextures/omni_kit_widget_viewport_ViewportTexture_0
/Render/Vars
/Render/Vars/LdrColor
```

å¯ä»¥ç™¼ç¾åªæœ‰é–‹é ­ä¸‰å€‹æ˜¯å±¬æ–¼ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} é€™å€‹layerçš„ï¼Œè‡³æ–¼å…¶ä»–çš„priméƒ½æ˜¯Omniverseå…§å»ºçš„ï¼Œä½ ç”šè‡³åœ¨Stageéƒ½çœ‹ä¸åˆ°ï¼Œå¯¦éš›ä¸Šé€™äº›æ±è¥¿æ²’æœ‰å­˜åœ¨æˆ‘å€‘è‡ªå·±çš„layerä¸­ï¼Œè€Œæ˜¯æ¯”è¼ƒåƒæ˜¯Omniverseæœ‰è‡ªå·±é è¨­çš„layerï¼Œé€™å€‹layeræ˜¯å­˜åœ¨æ–¼Appå…§éƒ¨çš„ã€‚

åŒæ™‚ï¼Œé€™ä¹Ÿå¸¶ä¾†ä¸€å€‹éº»ç…©ï¼Œæˆ‘å€‘ä¸èƒ½å¾ˆç›´è§€çš„çŸ¥é“åˆ°åº•stageä¸­æœ‰ç”šéº¼æ±è¥¿ï¼Œæˆ‘å€‘çš„\.usdaä¸èƒ½å®Œå…¨ä»£è¡¨ç›®å‰çš„stageï¼Œé€™ä¹Ÿå°±æ˜¯Omniverseèˆ‡è·Ÿå–®ç´”çš„OpenUSDæœ€å¤§çš„å·®åˆ¥ï¼Œä¹Ÿè­‰æ˜Omniverseæ˜¯ä¸€å€‹åŸºæ–¼OpenUSDï¼Œä½†åŒæ™‚å…·å‚™é¡å¤–æ¶æ§‹çš„å¹³å°ã€‚

æ­¤æ™‚ï¼Œè‹¥ä½ åªæƒ³æ‰¾ç‰¹å®šschemaçš„primï¼Œä¾‹å¦‚Scopeä»¥åŠCubeå¯ä»¥åŸ·è¡Œè…³æœ¬
```python
from pxr import Usd, UsdGeom, Sdf

stage = omni.usd.get_context().get_stage()
for prim in stage.Traverse():
 if UsdGeom.Scope(prim):
  print(prim.GetPath().pathString)
 elif prim.IsA(UsdGeom.Cube):
  print(prim.GetPath().pathString)
```

å¦‚æ­¤å°±åªæœƒè¼¸å‡º
```rust
/Geometry
/Geometry/GroupTransform/Box
```
#### Active/Inactive

æ¥è‘—å°±æ˜¯activeé€™å€‹metadataäº†ï¼Œä¸€æ¨£æ‰“é–‹ [MyModel\.usda](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-03-openusd-be14a4a5704f#a41d){:target="_blank"} å¾ŒåŸ·è¡Œä»¥ä¸‹è…³æœ¬
```python
from pxr import Usd, UsdGeom, Sdf

stage: Usd.Stage = omni.usd.get_context().get_stage()
box_prim = stage.GetPrimAtPath("/Geometry/GroupTransform/Box")
if box_prim:
  box_prim.SetMetadata('active', False)
```

å„²å­˜å¾Œæª¢è¦–å¯ä»¥ç™¼ç¾ `"Box"` çš„metadataå¤šäº†ä¸€å€‹active
```ruby
def Scope "Geometry"
{
    def Xform "GroupTransform"
    {
        def Cube "Box" (
            active = false
        )
        {
        }
    }
}
```

åŒæ™‚ï¼ŒOmniverseä¸­Stageçš„ `"Box"` ä¹Ÿæœ‰ç™¼ç”Ÿè®ŠåŒ–ï¼Œå¯ä»¥ç™¼ç¾å¤šäº†ç¦æ­¢çš„ç¬¦è™Ÿ


![](/assets/a7fa6a26a49a/1*LURU9tKGfdbZOQq31dt5og.png)


æ­¤æ™‚é‡æ–°åŸ·è¡ŒTraverseçš„è…³æœ¬å¯ä»¥ç™¼ç¾è¼¸å‡ºåªå‰©ä¸‹
```rust
/Geometry
```

é™¤æ­¤ä¹‹å¤–ç•¶ç„¶é‚„æœ‰å…¶ä»–çš„metadataï¼Œä½†é€™é‚Šå°±ä¸ä¸€ä¸€åˆ—èˆ‰ï¼Œå°±è‡ªå·±å¤šå¤šå˜—è©¦æˆ–æ˜¯ç”¨GPTæœå°‹ä¾‹å¦‚ï¼š
1. `hidden` ï¼šé€™å€‹å…ƒæ•¸æ“šéµç”¨æ–¼æ¨™è¨˜ä¸€å€‹åŸå§‹ç‰©é«”æ˜¯å¦éš±è—ã€‚ç›¸ç•¶æ–¼èª¿ç”¨ `UsdPrim::SetHidden()` æ–¹æ³•ã€‚
2. `kind` ï¼šé€™å€‹å…ƒæ•¸æ“šéµç”¨æ–¼æŒ‡å®šåŸå§‹ç‰©é«”çš„é¡å‹ï¼ˆä¾‹å¦‚ï¼Œçµ„ã€çµ„ä»¶ç­‰ï¼‰ã€‚
3. `assetInfo` ï¼šé€™æ˜¯ä¸€å€‹å­—å…¸ï¼Œç”¨æ–¼å­˜å„²èˆ‡è³‡ç”¢ç›¸é—œçš„ä¿¡æ¯ï¼Œå¦‚è³‡ç”¢çš„åç¨±ã€ç‰ˆæœ¬ç­‰ã€‚
4. `documentation` ï¼šé€™å€‹å…ƒæ•¸æ“šéµç”¨æ–¼å­˜å„²èˆ‡åŸå§‹ç‰©é«”ç›¸é—œçš„æ–‡æª”æˆ–æè¿°ä¿¡æ¯ã€‚
5. `comment` ï¼šé€™å€‹å…ƒæ•¸æ“šéµç”¨æ–¼å­˜å„²èˆ‡åŸå§‹ç‰©é«”ç›¸é—œçš„æ³¨é‡‹æˆ–å‚™è¨»ã€‚
6. `customLayerData` ï¼šé€™æ˜¯ä¸€å€‹å­—å…¸ï¼Œç”¨æ–¼å­˜å„²è‡ªå®šç¾©çš„å±¤æ•¸æ“šã€‚
7. `instanceable` ï¼šé€™å€‹å…ƒæ•¸æ“šéµç”¨æ–¼æ¨™è¨˜ä¸€å€‹åŸå§‹ç‰©é«”æ˜¯å¦å¯å¯¦ä¾‹åŒ–ã€‚


ç¸½ä¹‹ï¼Œå°±å¦‚åŒkindä¸­çš„èˆ‰ä¾‹ï¼Œmetadataå°±åƒæ˜¯primçš„tag
### çµè«–

ç¸½è€Œè¨€ä¹‹ï¼Œæœ¬ç¯‡ä¸»è¦ä»‹ç´¹äº†primä¸­çš„dataï¼Œå…¶åˆ†ç‚ºProperty and Metadataï¼Œé€™æ¨£æˆ‘å€‘åŸºæœ¬ä¸Šå°æ–¼primçš„çµ„æˆæœ‰äº†å¤§è‡´çš„èªè­˜ï¼Œé™¤æ­¤ä¹‹å¤–ä¹Ÿé †ä¾¿ä»‹ç´¹äº†å¦‚ä½•åœ¨Omniverseä¸­åŸ·è¡Œç°¡å–®çš„è…³æœ¬ï¼ŒåŒæ™‚å¯ä»¥å°ç…§ç•«é¢ä»¥åŠ\.usdçš„è®ŠåŒ–ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥æ›´æ·±å…¥çš„å¾€ä¸‹æ¢ç´¢äº†ã€‚

ä¾‹å¦‚è¢«æˆ‘è·³éå»çš„ **Value resolution** ï¼Œå®ƒæ˜¯æœ‰é—œæ–¼attrè§£ææ™‚çš„ç­–ç•¥ï¼Œå› ç‚ºattçš„valueä¾†è‡ªæ–¼ä¸‰å€‹sources
- Value clips
- Authored timeSamples
- Default value


ç°¡å–®ä¾†èªªï¼Œå‰å…©è€…éƒ½è·Ÿå‹•ç•«ç³»çµ±æœ‰é—œï¼Œå› ç‚ºç›¸å°æ–¼metadataï¼Œattrçš„ç‰¹è‰²å°±æ˜¯æœƒéš¨è‘—æ™‚é–“å…§æ’ï¼Œæœ€å¾Œä¸€å€‹å°±æ˜¯attæœ¬èº«å„²å­˜çš„é è¨­å€¼ï¼Œå„ªå…ˆåºç”±ä¸Šåˆ°ä¸‹ï¼Œå¦‚æœæ²’æœ‰å‹•ç•«çš„è©±ï¼Œé‚£å¤§å¤šæ•¸éƒ½æ˜¯æ¡ç”¨Default valueã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸åŒlayersä½†æ˜¯åŒåçš„attributeæœ€çµ‚æœƒç”±æœ€å¼·çš„é‚£å€‹opinionçš„attributeå‹å‡ºï¼Œæ­¤æ™‚stageä¸Šcomposeå‡ºä¾†çš„primçš„attributeçš„valueå°±æ˜¯Default valueï¼Œæ›è¨€ä¹‹ï¼Œæœ¬ç¯‡ä¹ƒè‡³æ–¼ä¹‹å‰çš„æ–‡ç« ä¸­stageä¸­çš„attrçš„valueéƒ½æ˜¯Default valueã€‚

è©³ç´°çš„æ±è¥¿å°±ç•™å¾…ä¸‹ä¸€ç¯‡ä»‹ç´¹ã€‚

æ„Ÿè¬ä½ çš„é–±è®€ï¼Œå¦‚æœä½ å°æˆ‘çš„æ–‡ç« å°ä½ æœ‰æ‰€å¹«åŠ©æˆ–æ˜¯æ„è¦‹æ­¡è¿å›è¦†ï¼Œå¦‚æœä½ æƒ³è¦æ”¯æŒæˆ‘å¯ä»¥ï¼š
- æ‹å€‹æ‰‹ğŸ‘‹ï¼Œæˆ–æ˜¯åˆ†äº«ä¸€äº›æƒ³æ³•ğŸ’¬
- [è¿½è¹¤æˆ‘çš„é é¢](https://medium.com/@maochinn){:target="_blank"}
- [è¨‚é–±æˆ‘çš„å°ˆæ¬„](https://medium.com/maochinn){:target="_blank"}
- [é€éLinkedInè¯ç¹«æˆ‘](https://www.linkedin.com/in/chih-wei-chang-6526801b2/){:target="_blank"}


æˆ–æ˜¯è§€çœ‹æˆ‘å…¶ä»–ç³»åˆ—æ–‡ç« 
- [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 00ï¼šKit\-based Development](../a54ae65f22bf/)
- [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 01ï¼šApplication and Extension](../e765192086c8/)
- [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 02ï¼šKit Workshop SIGGRAPH 2022](../2183284ed751/)
- [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 03ï¼šOpenUSD](../be14a4a5704f/)
- [ã€Omniverseã€‘å­¸ç¿’ç­†è¨˜ â€” 04ï¼šPrims and Schemas](../8a5581d9ef78/)



_[Post](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-05-property-and-metadata-a7fa6a26a49a){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
