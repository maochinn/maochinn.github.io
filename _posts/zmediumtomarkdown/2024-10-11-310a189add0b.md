---
title: "【Omniverse】Development 101: Kit Workshop SIGGRAPH 2022"
author: "帽捲"
date: 2024-10-11T06:15:05.334+0000
last_modified_at: 2024-11-27T14:36:55.126+0000
categories: ["Maochinn"]
tags: ["omniverse","nvidia","siggraph","extension","101"]
description: "中文版本：【Omniverse】學習筆記 — 02：Kit Workshop SIGGRAPH 2022"
image:
  path: /assets/310a189add0b/0*kG7encqWuok540AH.png
render_with_liquid: false
---

### 【Omniverse】Development 101: Kit Workshop SIGGRAPH 2022

中文版本： [【Omniverse】學習筆記 — 02：Kit Workshop SIGGRAPH 2022](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-02-kit-workshop-siggraph-2022-2183284ed751?source=your_stories_page-------------------------------------){:target="_blank"}

This article continues [【Omniverse】Development 101: Getting Started with Kit\-Based Development](https://medium.com/maochinn/omniverse-development-101-getting-started-with-kit-based-development-78f8915183be?source=your_stories_page-------------------------------------){:target="_blank"} and continues to learn the remaining Courses following the Learning Path, which are
- Build Beautiful, Custom UI for 3D Tools on NVIDIA Omniverse
- Easily Develop Advanced 3D Layout Tools on NVIDIA Omniverse
- How to Build Custom 3D Scene Manipulator Tools on NVIDIA Omniverse



![Figure 1: Omniverse Kit\-based Development Learning Path](/assets/310a189add0b/1*96JSVd1mtkEXLgmIJ4ecSg.png)

Figure 1: Omniverse Kit\-based Development Learning Path

It is worth reminding that these three courses are all based on Omniverse Code in **Omniverse Laucher** \. This was previously studied in [【Omniverse】Development 101: Getting Started with Kit\-Based Development](../78f8915183be/) mentioned that it can be replaced by Kit Base Editor, that is, kit\-app can be used \-template is created\.

In addition, these three courses have one thing in common\. They all seem to come from the SIGGRAPH **2022 Workshop** , so the versions used in their courses will stay at an older time\. As a result, the extensions used in some courses may have been Can’t find it, luckily we can find them on NVIDIA’s Github\.

[**kit\-workshop\-siggraph2022/exts at v1\.0\.1 · NVIDIA\-Omniverse/kit\-workshop\-siggraph2022**](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts){:target="_blank"} 
[_SIGGRAPH 2022 Workshop\. Contribute to NVIDIA\-Omniverse/kit\-workshop\-siggraph2022 development by creating an account on…_ github\.com](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts){:target="_blank"}

It should be noted that the tag used in Course is **v1\.0\.1** \. There are a total of 5 extensions in it, which can be added to your own application according to your own needs\.

This includes the study notes in [【Omniverse】Development 101: Getting Started with Kit\-Based Development](../78f8915183be/) \. We made our own **scatter extension\.** As for how to add extension to my own application method, please refer to [【Omniverse】Development 101: Understanding Applications and Extensions](../1d990d98b7f9/) \.
### Build Beautiful, Custom UI for 3D Tools on NVIDIA Omniverse

To put it simply, this course is to add some Custom UI and functions based on **Scatter Extension** \.

[**Course \| NVIDIA**](https://learn.nvidia.com/courses/course?course_id=course-v1:DLI+S-OV-08+V1&unit=block-v1:DLI+S-OV-08+V1+type@vertical+block@d5674416bd004c8fae8b0bd2fd7249f5){:target="_blank"} 
[_Edit description_ learn\.nvidia\.com](https://learn.nvidia.com/courses/course?course_id=course-v1:DLI+S-OV-08+V1&unit=block-v1:DLI+S-OV-08+V1+type@vertical+block@d5674416bd004c8fae8b0bd2fd7249f5){:target="_blank"}

For instance, if you have created a scatter extension, you can enhance it by adding custom UI elements\. Here’s a simple example of how to modify a button’s click callback function to include parameters:
```lua
ui.Button(
                        " S ",
                        width=0,
                        height=0,
                        style={"margin": 0},
                        clicked_fn=self._on_get_selection,
                        tooltip="Get From Selection",
                    )
```

In this example, the `clicked_fn` is wrapped in a lambda function to pass the necessary parameters\.
```python
clicked_fn=lambda:self._on_get_selection(self._source_prim_model),
```

then `_on_get_selection` have to modify to this
```python
def _on_get_selection(self, model):
        """Called when tthe user presses the "Get From Selection" button"""
        model.as_string = ", ".join(get_selection())
```

The same goes for the other button, change it to this
```python
ui.Button("Scatter", clicked_fn=lambda:self._on_scatter(self._source_prim_model, self._scatter_prim_model))
```

then `_on_scatter` have to modify to this
```python
def _on_scatter(self, source_model, scatter_model):
        """Called when the user presses the "Scatter" button"""
        prim_names = [i.strip() for i in source_model.as_string.split(",")]
        if not prim_names:
            prim_names = get_selection()

if not prim_names:
            # TODO: "Can't clone" message
            pass

transforms = scatter(
            count=[m.as_int for m in self._scatter_count_models],
            distance=[m.as_float for m in self._scatter_distance_models],
            randomization=[m.as_float for m in self._scatter_random_models],
            id_count=len(prim_names),
            seed=self._scatter_seed_model.as_int,
        )

duplicate_prims(
            transforms=transforms,
            prim_names=prim_names,
            target_path=scatter_model.as_string,
            mode=self._scatter_type_model.get_current_item().as_string,
        )
```

Or you can add an existing scatter extension directly from github


![Figure 2: Scatter Tool \(omni\.example\.ui\_scatter\_tool\)](/assets/310a189add0b/0*Etk-7IE3e_qQX-_m.png)

Figure 2: Scatter Tool \(omni\.example\.ui\_scatter\_tool\)

[**kit\-workshop\-siggraph2022/exts/omni\.example\.ui\_scatter\_tool at v1\.0\.1 ·…**](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts/omni.example.ui_scatter_tool){:target="_blank"} 
[_SIGGRAPH 2022 Workshop\. Contribute to NVIDIA\-Omniverse/kit\-workshop\-siggraph2022 development by creating an account on…_ github\.com](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts/omni.example.ui_scatter_tool){:target="_blank"}


[![](https://opengraph.githubassets.com/6bb422c307af8ebb2dfd1459287711f2c82a3170eb107b415ebd5ed175dd4712/NVIDIA-Omniverse/kit-extension-sample-scatter)](https://github.com/NVIDIA-Omniverse/kit-extension-sample-scatter){:target="_blank"}


However, I can’t find the _omni\.kit\.window\.inspector_ extension mentioned at the end of the course\. It seems that you can use it to adjust the UI directly on the screen\. You can preview it first and it will not affect the code, but it seems to have expired, or someone changed the name, so I can’t find it\.
### Easily Develop Advanced 3D Layout Tools on NVIDIA Omniverse

[**Course Detail \| NVIDIA**](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-07+V1){:target="_blank"} 
[_About Course Objectives Topics Covered Course Outline Stay Informed Contact Us_ learn\.nvidia\.com](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-07+V1){:target="_blank"}

To develop advanced 3D layout tools, you need to understand the **transformation matrices** used in Omniverse, which are based on Pixar’s USD format\. Here’s how you can import and use the `Gf` module for matrix operations:
```javascript
from pxr import Gf
```

Gf’s matrix is ​​in **row\-major order,** probably because the matrix in \.usd is in row\-major order

[**Gf module — pxr\-usd\-api 105\.0\.2 documentation**](https://docs.omniverse.nvidia.com/kit/docs/pxr-usd-api/105.0.2/pxr/Gf.html#pxr.Gf.Matrix4d){:target="_blank"} 
[_The transformation matrix is applied as follows: the position and the direction vector are transformed with the given…_ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/kit/docs/pxr-usd-api/105.0.2/pxr/Gf.html#pxr.Gf.Matrix4d){:target="_blank"}

Therefore, it can be noticed that the order of matrix multiplication will be opposite to that of column\-major order in GL\. For example, in Scale\*Rotate\*Translate, the matrix will be multiplied to the right\.
```python
transformation = (
    Gf.Matrix4d().SetScale(
        Gf.Vec3d(
            1.0,
            1.0,
            1.0,
        ))
    * Gf.Matrix4d().SetTranslate(
        Gf.Vec3d(
            0.0,
            0.0,
            0.0,
        ))
)
```

In addition, Translation has these three methods:
```python
matrix= Gf.Matrix4d(1)

matrix.ExtractTranslation()
matrix.GetRow(3)
matrix[3]
```

Here we can also know that matrix\[i\] \[j\] refers to the i\-th row and j\-th col, and the translate will be placed in the bottom row\. In addition, I don’t know why scale has not opened an API\. It seems that the only way to get it is this way\.
```python
matrix= Gf.Matrix4d(1)

scale_vector = (matrix.GetRow3(0).GetLength(), matrix.GetRow3(1).GetLength(), matrix.GetRow3(2).GetLength())
```


[![](https://opengraph.githubassets.com/fc53e3ee365ef932aae86da74a37a34e8a5853e72c4bd7e36ab52c92e7db781f/Vochsel/vochsel_wiki)](https://github.com/Vochsel/vochsel_wiki/blob/master/usd.md){:target="_blank"}


[**Universal Scene Description: GfMatrix4d Class Reference**](https://openusd.org/dev/api/class_gf_matrix4d.html){:target="_blank"} 
[_Accesses an indexed row i of the matrix as an array of 4 double values so that standard indexing \(such as m\[0\] \[1\] \)…_ openusd\.org](https://openusd.org/dev/api/class_gf_matrix4d.html){:target="_blank"}
### How to Build Custom 3D Scene Manipulator Tools on NVIDIA Omniverse

This course is divided into two phases, but essentially it just showcases the power of the Omniverse\. There are not many actual operations\. It mainly tells you what extensions can do, so that you can develop your own extensions based on these extensions\.

[**Course Detail \| NVIDIA**](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-06+V1){:target="_blank"} 
[_About Course Objectives Topics Covered Course Outline Stay Informed Contact Us_ learn\.nvidia\.com](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-06+V1){:target="_blank"}

First, you can display widget information next to 3D objects in screen space\.


![Figure 3: Widget Info \(omni\.example\.ui\_scene\.widget\_info\)](/assets/310a189add0b/0*pfv5IlXAIPSPTFYQ.png)

Figure 3: Widget Info \(omni\.example\.ui\_scene\.widget\_info\)

[**kit\-workshop\-siggraph2022/exts/omni\.example\.ui\_scene\.widget\_info at v1\.0\.1 ·…**](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts/omni.example.ui_scene.widget_info){:target="_blank"} 
[_SIGGRAPH 2022 Workshop\. Contribute to NVIDIA\-Omniverse/kit\-workshop\-siggraph2022 development by creating an account on…_ github\.com](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts/omni.example.ui_scene.widget_info){:target="_blank"}

Just note that some APIs may be out of date due to version issues, so you need to change `UsdLux.Light` in widget\_info\_model\.py to `UsdLux.RectLight` , otherwise it will not be added and an error will be reported, although the meaning of the program code is different , but at least it works


![Figure 4: Compare with old and modified version](/assets/310a189add0b/1*aGEZhFK_O_EGA9D3oqIZMA.png)

Figure 4: Compare with old and modified version

The second part is the Light Manipulator\. You can directly adjust the range and brightness/intensity of the Rectlight \(plane light source\) in the viewport\. You can also install it yourself\.


![Figure 5: Light Manipulator \(omni\.example\.ui\_scene\.light\_manipulator\)](/assets/310a189add0b/0*kG7encqWuok540AH.png)

Figure 5: Light Manipulator \(omni\.example\.ui\_scene\.light\_manipulator\)

[**kit\-workshop\-siggraph2022/exts/omni\.example\.ui\_scene\.light\_manipulator at v1\.0\.1 ·…**](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts/omni.example.ui_scene.light_manipulator){:target="_blank"} 
[_SIGGRAPH 2022 Workshop\. Contribute to NVIDIA\-Omniverse/kit\-workshop\-siggraph2022 development by creating an account on…_ github\.com](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/v1.0.1/exts/omni.example.ui_scene.light_manipulator){:target="_blank"}

There are also some things that need to be adjusted in this part\. You need to add `super().__init__()` in extension\.py, otherwise the same error will be reported\.


![Figure 6](/assets/310a189add0b/1*H8OVrL3tibOS9__FbK_GBw.png)

Figure 6

However, please note here that if you use the stage\.usd attached to Course, the rectlight in the scene will not display the yellow line like in Figure 4, but if you manually create a new rectlight, it will display normally\.

In fact, this is not a problem with the program code or API, it should be a change in the format of \.usd, or a change in omniverse’s rules for reading \.usd, because if we output two Rectlights together into **\.usda** , open the two to compare you’ll know why
Here I will directly talk about how to adjust it\.

The original Rectlight of the scene in **stage\.usda** is as follows
```java
def RectLight "RectLight" (
            prepend apiSchemas = ["ShapingAPI"]
        )
        {
            color3f color = (0.19691122, 0.018246593, 0.15069367)
            float height = 232.31076
            float intensity = 24483.492
            float shaping:cone:angle = 180
            float shaping:cone:softness
            float shaping:focus
            color3f shaping:focusTint
            asset shaping:ies:file
            token visibility = "inherited"
            float width = 204.63292
            double3 xformOp:rotateXYZ = (-10.797770015817491, -160.58920866323336, 4.920241161909303)
            double3 xformOp:scale = (1, 1, 1)
            double3 xformOp:translate = (-5.962081968369314e-14, 150.00000000000003, -350.00000000000006)
            uniform token[] xformOpOrder = ["xformOp:translate", "xformOp:rotateXYZ", "xformOp:scale"]
        }
```

We need to prefix some parameters with `input:`
```java
def RectLight "RectLight" (
    prepend apiSchemas = ["ShapingAPI"]
)
{
    color3f color = (0.19691122, 0.018246593, 0.15069367)
    float inputs:height = 232.31076
    float inputs:intensity = 24483.492
    float inputs:shaping:cone:angle = 180
    float inputs:shaping:cone:softness
    float inputs:shaping:focus
    color3f shaping:focusTint
    asset shaping:ies:file
    token visibility = "inherited"
    float inputs:width = 204.63292
    double3 xformOp:rotateXYZ = (-10.797770015817491, -160.58920866323336, 4.920241161909303)
    double3 xformOp:scale = (1, 1, 1)
    double3 xformOp:translate = (-5.962081968369314e-14, 150.00000000000003, -350.00000000000006)
    uniform token[] xformOpOrder = ["xformOp:translate", "xformOp:rotateXYZ", "xformOp:scale"]
}
```

Among them, height, intensity, and width, because these three variables are not added with `input:` , the script cannot read the values\. Of course, it cannot calculate anything, which means that the extension will not display any lines\.

Similar extensions can also be found here\.


[![](https://opengraph.githubassets.com/dc830dd893d0e51ae6f2f058fb333107c936e16aa48ccc41c585c261eff84342/NVIDIA-Omniverse/kit-extension-sample-ui-scene)](https://github.com/NVIDIA-Omniverse/kit-extension-sample-ui-scene/tree/main){:target="_blank"}


[**UsdLux module — Omniverse Kit 106\.1\.0 documentation**](https://docs.omniverse.nvidia.com/kit/docs/pxr-usd-api/latest/pxr/UsdLux.html){:target="_blank"} 
[_Summary: The UsdLux module provides a representation for lights and related components that are common to many graphics…_ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/kit/docs/pxr-usd-api/latest/pxr/UsdLux.html){:target="_blank"}
### Conclusion

Through these three courses, you can get a general idea of ​​ **how extensions can actually be applied** \. You can also use NVIDIA’s existing samples to continue learning\. You can also find that although some codes are outdated and some code needs to be adjusted, most of the programs The code is still feasible, and we can also learn how to debug it ourselves\.

But one thing worth noting is the **\.usd** file, which is mentioned in different courses, such as **transformation** and adding the `input:` field in Attribute\. It seems that they are very closely related to Omniverse\. In fact, Omniverse is based on USD We will focus on them in the next article\.


> The platform for developing OpenUSD applications for industrial digitalization and physical AI simulation\. 






[![](https://www.nvidia.com/content/dam/en-zz/Solutions/gtcf20/omniverse/refresh-open-beta/nvidia-omniverse-og-image-1200x630.jpg)](https://www.nvidia.com/en-us/omniverse/){:target="_blank"}


Thank you for reading\! If you found my article helpful or have any feedback, feel free to reply\. If you’d like to support me, you can:
- Clap 👏 or share your thoughts 💬
- [Follow me on Medium](https://medium.com/@maochinn){:target="_blank"}
- [Subscribe to me on Medium](https://medium.com/maochinn){:target="_blank"}
- [Connect with me on LinkedIn](https://www.linkedin.com/in/chih-wei-chang-6526801b2/){:target="_blank"}


You can also check out my other series of articles:
- [【Omniverse】Development 102: OpenUSD](../59dee6c16bd5/)
- [【電腦圖學】學習筆記 — 00：OpenGL](../fa7105f59ecd/)
- [【Blender】Geometry Node 像素風](../1870e1ad5fc3/)
- [【Unity】Displacement Map](../f588242049c6/)



_[Post](https://medium.com/maochinn/omniverse-development-101-kit-workshop-siggraph-2022-310a189add0b){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
