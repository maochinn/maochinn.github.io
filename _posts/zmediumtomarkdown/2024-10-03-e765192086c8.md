---
title: "【Omniverse】學習筆記 — 01：Application and Extension"
author: "帽捲"
date: 2024-10-03T06:19:00.695+0000
last_modified_at: 2025-02-27T07:12:34.036+0000
categories: ["Maochinn"]
tags: ["omniverse","kit","custom-application","nvidia","101"]
description: "Omniverse的軟體大致可以分為，Application跟Extension，這個關係類似於Blender跟Addon的關係，只是在Omniverse中模組化做得更加徹底，基本上畫面中所有的視窗都會是extension，Application只是選擇好幾個extension組…"
image:
  path: /assets/e765192086c8/0*ndP8J2e97XfksAS0.png
render_with_liquid: false
---

### 【Omniverse】學習筆記 — 01：Application and Extension

English Version: [【Omniverse】Development 101: Understanding Applications and Extensions](https://medium.com/@maochinn/omniverse-development-101-understanding-applications-and-extensions-1d990d98b7f9?source=your_stories_page-------------------------------------){:target="_blank"}

依據 [【Omniverse】學習筆記 — 00：Kit\-based Development](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-00-kit-based-development-a54ae65f22bf?source=your_stories_page-------------------------------------){:target="_blank"} 中介紹的三個course，我們大概對何謂extension有點概念，同時有提到「application其實就是由一堆extension所組成的」，因此，本篇將會聚焦來看Omniverse SDK中的Application和Extension究竟是甚麼。
#### 目錄
- Creating and Customizing an Omniverse Extension
- Develop, Customize, and Publish in Omniverse With Extensions

### Application

根據NVIDIA在Omniverse網站上的概念來說，Stage就是場景，其包含3D模型、燈光、相機等，同時利用USD render將場景顯示在畫面上，藉由USD Writer來從畫面上編輯場景，諸如此類的功能其實都是extension，而這些extension聚合在一起，他們就可以組合成一個application。


![圖一：Omniverse Cloud Sensor RTX APIs are available as individual APIs that allow you to leverage Omniverse core technologies for OpenUSD and RTX in your](/assets/e765192086c8/0*c-MghVeHNVwQyPBK.jpeg)

圖一：Omniverse Cloud Sensor RTX APIs are available as individual APIs that allow you to leverage Omniverse core technologies for OpenUSD and RTX in your


[![](https://www.nvidia.com/content/dam/en-zz/Solutions/Data-Center/dgx-cloud/dgx-cloud-ov-og.jpg)](https://www.nvidia.com/en-us/omniverse/cloud/){:target="_blank"}


那麼根據之前course使用的kit\-app\-template，官方的文件也有描述到


> _The Kit_ SDK Extension Architecture _allow developers to define_ **Extensions** _and_ **Applications** _\._ 





而在描述Apps & Extensions時最後一段是這樣說的


> You will start to think of Extensions as “pieces of capabilities” and of Applications as **“the collection of Extensions”** \. 





白話來說，SDK提供給你一個比較簡易的堆積木的方式，因此在Course中你學到可以任意的將想要的功能\(extension\)列在\.kit中，之後就可以build成一個Custom Kit Application，也就是說，Application只是把一堆extension組合起來而已，換言之，真正的實作、程式碼都在extension裡面。

因此，App畫面中每一個的區塊就是一個extension，就如同前面course所做過的UI一樣。


![圖二：Omniverse Kit window](/assets/e765192086c8/0*ndP8J2e97XfksAS0.png)

圖二：Omniverse Kit window

包含畫面中的Menu, viewport等，甚至是畫面中看不見的資源管理、框架類的功能，這些全部都是extensions，但是這又顯得extension過於龐雜，因此extension之間也有一些區分，雖然他們在形式上是相同的，但是我們可以依據功能來區分。


> At the foundation of Kit SDK, the **Kit Kernel** provides the ability to bootstrap Applications and execute code\. All capability on top of the Kernel is provided by Extensions\. Kit SDK contains hundreds of Extensions providing **runtime functionality** such as USD, rendering, and physics — and other Extensions providing **workflow solutions** such as USD Stage inspectors, viewport, and content browsers\. 




### Extension

就像是圖二中可以看見許多綠色框，他們都是表示extension，全部都基於最下方的 **Kit Kernel** ，基於此，其上有 **Runtime Extension** 、 **Framework Extension** ，前者功能包含讀寫USD、render場景或是物理模擬等這些在執行時才會運作的功能；後者則是框架相關的，包含UI的程式要怎麼設計、Extension要怎麼管理等。

在整個畫面上的這些視窗也是extension，主要提供 **workflow solutions** ，也就是攸關整個流程中，每個物件該如何搭配的extension，包含viewport、場景inspectors等。

而這些Kit SDK中已經提供的extebsion我們姑且稱之為Kit Core Extension，那麼我們自己用\.kit產生出來的Custom Kit App與其他Extension的關係如圖三所示


![圖三：Kit SDK, application and extension](/assets/e765192086c8/0*LkhKDHFkwf6HS9KM.png)

圖三：Kit SDK, application and extension

圖三可以注意到，底層是Kit SDK提供的Kit Kernel，基於Kernel則是App，也就事一系列的extension，App中有自己寫的custom extension，通常是給這個app專用的功能，然後左手邊則是自己註冊的其他Kit Core Extension，以及Sample Extensions，此處的Sample Extensions可以理解成其他或是第三方提供的extension。同時，官方文檔是這樣描述的


> By combining the Kit SDK Extensions with one or more custom Extensions, new workflow and service based solutions can be created\. The **Extension Architecture** of Kit has been designed for **extreme modularity** — enabling rapid development of reusable modules: 





這樣設計Application與extension的原因就是希望模組化，藉由組合不同的extension產生客製化的application，不僅重複利用extension，避免類似功能的重複開發，也降低了產生一個app的成本。

[**Kit SDK Overview — kit\-app\-template 105\.1 documentation**](https://docs.omniverse.nvidia.com/kit/docs/kit-app-template/105.1/kit_sdk_overview.html){:target="_blank"} 
[_Here’s another way to conceptualize the stack of an Application\. At the foundation level of an app we have the Kit…_ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/kit/docs/kit-app-template/105.1/kit_sdk_overview.html){:target="_blank"}

綜上所述，我們可以理解，所有功能真正的實作都在extension中，那麼，extension究竟長甚麼樣子呢？實際上extension是由一系列制定好的格式所組成，包含extension\.toml、extension\.py以及premake5\.lua等，幸運的是，官方有提供 [kit\-app\-template](https://github.com/NVIDIA-Omniverse/kit-app-template){:target="_blank"} 以及 [kit\-extension\-template](https://github.com/NVIDIA-Omniverse/kit-extension-template){:target="_blank"} ，他們有提供不同添加extension的方式。

實際上，之前在 [【Omniverse】學習筆記 — 00：Kit\-based Development](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-00-kit-based-development-a54ae65f22bf?source=your_stories_page-------------------------------------){:target="_blank"} 之中就已經學到這兩種添加extension的方式，事實上，這就分別對應圖三中的custom extensions以及sample extensions。因此，根據之前學習的兩個course，我們要來簡短複習一下如何添加extension。
### Creating and Customizing an Omniverse Extension

第一種方式，在這個課程中依據 [kit\-app\-template](https://github.com/NVIDIA-Omniverse/kit-app-template){:target="_blank"} 提供的方法可以自動產生extension的模板，
```bash
.\repo.bat template new 
```

同時在 [kit\-app\-template](https://github.com/NVIDIA-Omniverse/kit-app-template){:target="_blank"} 中的\.kit需要註冊，舉例來說
```ini
"my_company.my_python_ui_extension" = {}
```

因此，我們可以在Extensions Manager的視窗搜尋到這個extension，可以注意到，我們自己產生的這個extension被分類NVIDIA的custom這個分類中。


![圖四：The custom extension will be classified as third party in extension manager](/assets/e765192086c8/1*tt9xjguDTT07qcm8r8jHNw.png)

圖四：The custom extension will be classified as third party in extension manager

此處，可以發現裡面有Core, Sample, Internal, Deprecated，你可以自己瀏覽一下，如果用比較簡單的方式來說明，Sample你可以想像就是第三方的extension，這包含我們開發者，當然，NVIDIA也算是。但是，custom extension與官方的Kit core extension都會被歸類在NVIDIA這個大類，這表示這些extension是這個application所必要的，因此才會被註冊在app的\.kit中。

[https://learn\.nvidia\.com/courses/course\-detail?course\_id=course\-v1:DLI\+S\-OV\-16\+V1](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-16+V1){:target="_blank"}
### Develop, Customize, and Publish in Omniverse With Extensions

在這個課程中介紹了另一種方式，首先在extension manager的左上角按下\+號，然後選擇New Extension Template Project，直接在其他路徑下獨立產生一個extension的project


![圖五：New extension template project in extension manager](/assets/e765192086c8/1*ZTg6i7_CK_VjggLfzkHgJQ.png)

圖五：New extension template project in extension manager

與剛剛的差別在於，他會被歸類在THIRD PARTY，換言之，這邊產生的extension當然是第三方開發的，他與NVIDIA分類中的custom extension的差別在於，這邊的extension是會被拿來重複使用的，因此他會是一個獨立的專案，不是依附於特定的app，也因此，他的大的分類是THIRD PARTY，因為它大多數由第三方開發的。


![圖六：The extension project will be classified as third party in extension manager](/assets/e765192086c8/1*CUQLou_niGVY1ty1CWZh9A.png)

圖六：The extension project will be classified as third party in extension manager

[**Course Detail \| NVIDIA**](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-02+V1){:target="_blank"} 
[_About Course Objectives Topics Covered Course Outline Stay Informed Contact Us_ learn\.nvidia\.com](https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-02+V1){:target="_blank"}

但是，你可能會好奇，如果我有一個別人寫好的第三方extension我該怎麼添加到application之中呢？可以從圖五中第二個選項中找到答案，他會連結到 [kit\-extension\-template](https://github.com/NVIDIA-Omniverse/kit-extension-template){:target="_blank"} 。

簡言之，我們需要打開extension manager中的settings，他位於右上角三條槓中


![圖七：Settings in extension manager](/assets/e765192086c8/1*_xr0mbDq-M7M2o7jb8GFyQ.png)

圖七：Settings in extension manager

此時可以看到，所有能夠被使用的extension都會放在這些路徑下面，倒過來說，只有在這些路徑下的extension才能被搜尋到


![圖八：Extension Search Paths](/assets/e765192086c8/1*kLpuDdiGPLp1aQiH4NN86w.png)

圖八：Extension Search Paths

圖八中最顯眼的就是下方有三行字體較亮的路徑，這是我創建三個extension project的路徑，Kit會自動幫我們添加路徑在setting中，這些extension都是THIRD PARTY，同時也只有他們是可以被刪除，至於其他灰色字體的路徑則是被歸類於NVIDIA。

因此，如果有已經別人的extension可以直接在setting中添加一個路徑即可，例如這是官方寫好的extension

[**kit\-workshop\-siggraph2022/exts at main · NVIDIA\-Omniverse/kit\-workshop\-siggraph2022**](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/main/exts){:target="_blank"} 
[_SIGGRAPH 2022 Workshop\. Contribute to NVIDIA\-Omniverse/kit\-workshop\-siggraph2022 development by creating an account on…_ github\.com](https://github.com/NVIDIA-Omniverse/kit-workshop-siggraph2022/tree/main/exts){:target="_blank"}

clone下來後，一樣開到extension中的setting，然後按\+號增加一個路徑


![圖九：Add a extension path](/assets/e765192086c8/1*fXut9RwEOMJG6V1vpjZwSA.png)

圖九：Add a extension path

然後填上類似這樣的絕對路徑
```bash
c:/users/ginochang/workspace/omniverse/kit-workshop-siggraph2022/exts
```

如果成功地話這樣在THIRD PARTY中應該就可以看到多出4個extensions，因為Kit會自動從該路徑中抓取extension的資訊。

令人好奇的是，THIRD PARTY extension的資訊不會註冊在\.kit，那究竟是會儲存在哪裡？

我們可以在類似這樣的路徑下面可以找到一個user\.config\.json
```kotlin
C:\Users\GinoChang\AppData\Local\ov\data\Kit\my_company.my_editor\0.1\user.config.json
```

會將我們添加的路徑會儲存在一個JSON檔，這樣下次執行就不需要在手動添加extension的路徑。
```json
"exts": {
                "userFolders": {
                    "0": "c:/users/ginochang/documents/kit-exts-spawn-prims/exts",
                    "1": "c:/users/ginochang/documents/kit-exts-command-library/exts",
                    "2": "c:/users/ginochang/documents/myname.example.scatter/exts",
                    "3": "c:/users/ginochang/workspace/omniverse/kit-workshop-siggraph2022/exts"
                },
                "enabled": {
                    "0": "myname.example.scatter-1.0.0",
                    "1": "myname.example.spawn_prims-1.0.0",
                    "2": "dli.example.command_library-1.0.0"
                }
            },
```

另一個值得一提的細節是，從圖八中被選取起來的灰色字體路徑可以發現，application拿到custom extension的路徑是在
```cpp
kit-app-template\_build\windows-x86_64\release\exts
```

而非是用kit\-app\-template創建extension出來的路徑
```bash
kit-app-template\source\extensions
```

因此這也就說明了，如果是要增加一個extension就必須要重新build，因為SDK需要把它extension從source搬到\_build資料夾
### 結論

原則上，如果你今天要開發extension可以使用 [kit\-app\-template](https://github.com/NVIDIA-Omniverse/kit-app-template){:target="_blank"} 或是 [kit\-extension\-template](https://github.com/NVIDIA-Omniverse/kit-extension-template){:target="_blank"} 的方式，也就是在app的\.kit檔中link custom extensions，或是在setting中添加路徑來link獨立的extension project，兩者會於SDK來說或許沒有差異，只是從不同的路徑去讀取extension。

但是或許可以思考的是，目前這個extension是否是專用於這個app，或者說有無重複利用的需求，如果是的話，那最好還是做成獨立的專案，也就是所謂的THIRD PARTY。


[![](https://opengraph.githubassets.com/986417dbc039236e347d8e6806d878f92f2420cdf13fc5593a69a141f828dbc2/NVIDIA-Omniverse/kit-app-template)](https://github.com/NVIDIA-Omniverse/kit-app-template){:target="_blank"}


[**GitHub — NVIDIA\-Omniverse/kit\-extension\-template: Omniverse Kit Extension Template**](https://github.com/NVIDIA-Omniverse/kit-extension-template){:target="_blank"} 
[_Omniverse Kit Extension Template\. Contribute to NVIDIA\-Omniverse/kit\-extension\-template development by creating an…_ github\.com](https://github.com/NVIDIA-Omniverse/kit-extension-template){:target="_blank"}

至於針對extension更細節的規範，就到官方的文檔看，本文主要聚焦在官方提供的方法

[**The Omniverse Kit SDK \- kit\-app\-template 106\.0\.2 documentation**](https://docs.omniverse.nvidia.com/kit/docs/kit-app-template/latest/docs/kit_sdk_overview.html){:target="_blank"} 
[_At its core, the Omniverse Kit SDK is a framework for efficiently managing extensions and plugins\. It provides the…_ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/kit/docs/kit-app-template/latest/docs/kit_sdk_overview.html){:target="_blank"}

感謝你的閱讀，如果你對我的文章對你有所幫助或是意見歡迎回覆，如果你想要支持我可以：
- 拍個手👋，或是分享一些想法💬
- [追蹤我的頁面](https://medium.com/@maochinn){:target="_blank"}
- [訂閱我的專欄](https://medium.com/maochinn){:target="_blank"}
- [透過LinkedIn聯繫我](https://www.linkedin.com/in/chih-wei-chang-6526801b2/){:target="_blank"}


或是觀看我其他系列文章
- [【Omniverse】學習筆記 — 02：Kit Workshop SIGGRAPH 2022](../2183284ed751/)
- [【電腦圖學】學習筆記 — 00：OpenGL](../fa7105f59ecd/)
- [【Blender】Geometry Node 像素風](../1870e1ad5fc3/)
- [【Unity】Displacement Map](../f588242049c6/)



_[Post](https://medium.com/maochinn/omniverse-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-01-application-and-extension-e765192086c8){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
