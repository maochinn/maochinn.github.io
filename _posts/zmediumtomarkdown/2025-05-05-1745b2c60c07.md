---
title: "【Omniverse Farm】學習筆記 — 01：Using Movie Capture to Render"
author: "帽捲"
date: 2025-05-05T10:02:33.700+0000
last_modified_at: 2025-05-06T05:41:30.577+0000
categories: ["Maochinn"]
tags: ["nvidia","omniverse","issac","ovx"]
description: "實際上，如果只是純粹要使用ov farm來render圖片，最簡單不需要寫code也不需要開terminal的方式就是使用Movie Capture這個extension。"
image:
  path: /assets/1745b2c60c07/1*6QeYQqo21W0pddJl3brOww.png
render_with_liquid: false
---

### 【Omniverse Farm】學習筆記 — 01：Using Movie Capture to Render

實際上，如果只是純粹要使用ov farm來render圖片，最簡單不需要寫code也不需要開terminal的方式就是使用Movie Capture這個extension。

[**Rendering Using Movie Capture \- Omniverse Farm**](https://docs.omniverse.nvidia.com/farm/latest/guides/render_with_moviecapture.html){:target="_blank"} 
[_Note Please ensure that all Farm components are installed and running before continuing\. Omniverse USD Composer comes…_ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/farm/latest/guides/render_with_moviecapture.html){:target="_blank"}

本篇分成三個階段介紹，第一是在本機端執行執行，不透過OV farm單純使用extension來render圖片，第二是用前篇的方式，先啟動本地的OV farm，然後用extension透過farm來render，最後就是使用遠端的OV farm。

首先，為了要使用extension來render，準確來說是，Omniverse Kit Movie Capture來render，我們要打開Issac\-sim\(本篇使用Issac\-sim4\.5\)或是Omniverse Kit，因為理論上該extension是基於Omniverse kit的。


![](/assets/1745b2c60c07/1*5T9uEUvFhNLYF8y4vrlDPA.png)



![](/assets/1745b2c60c07/1*M3VoXnhVzAcR2v__3XubrQ.png)


理論上enable後，就可以在Window>Rendering>Movie Capture找到，如果按下去會報錯可能需要自己去稍微debug一下，例如
```typescript
[Error] [omni.kit.window.movie_capture.extension] Error in show_window: 'MovieCaptureExtension' object has no attribute '_window'
[Error] [omni.kit.actions.core.python] Error executing PythonAction 'EMBridge_window_rendering_movie_capture': AttributeError: 'MovieCaptureExtension' object has no attribute '_menu'
```

但是有時候不會出錯，這個部分可能要自己小改一下，總之開啟視窗後長的會像這樣


![](/assets/1745b2c60c07/1*SUP5SNT6PaAOBr4HiCatGg.png)


可以先注意最下面的Output的欄位，我們可以設定render圖片的輸出路徑，設定完畢後就是要決定用甚麼場景來render，我們可以用官方Asset
```ruby
https://docs.omniverse.nvidia.com/usd/latest/usd_content_samples/downloadable_packs.html
```

中的Samples/Flight/Flight\.usd來試試看，開啟後，可以注意到有一些欄位有了變化，主要是Capture Settings


![](/assets/1745b2c60c07/1*6QeYQqo21W0pddJl3brOww.png)



![](/assets/1745b2c60c07/1*fVm4mP22OfZU_-QunoMuIA.png)


可注意到到Camera有被指定，Frame rate變成24，Capture range也變成0~14400等等，這些都是\.usd中有紀錄的資訊，我們可以直接試試看直接用extension來render看看，按下Capture Sequence。


![](/assets/1745b2c60c07/1*EbtYJJ0OSMD-j_zNweVEIQ.png)



![](/assets/1745b2c60c07/1*rdz8xQ59MB7iRZqF4fqfCQ.png)


我們就可以看到跳出新的視窗Capture Progress顯示正在render，期間可以隨時按下Pause，同時到設定好的輸出路徑應該就會看到圖片，這個extension大致就是這樣，非常直覺，基本上只要準備好\.usd就可以。但這邊的render如果用多張GPU，應該也只是圖片均分給每一張GPU個別render，而不是多張GPU一起針對同一張圖片加速render。

接下來，就是使用繼上篇，在local啟動ov farm instance，使用local agent來render，那麼按照之前所述，我們如果要做一個render的task，那應該要有對應的job，在這個extension預設使用的task type是 _create\-render_ ，因此我們應該要建立一個名稱是 _create\-render_ 的job，詳細可以參考

[**Using Farm to Render Kit Applications \- Omniverse Farm**](https://docs.omniverse.nvidia.com/farm/latest/guides/rendering_with_kat.html){:target="_blank"} 
[_The create\-render job definition can be used to render a USD stage using any Omniverse Kit application, such as USD…_ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/farm/latest/guides/rendering_with_kat.html){:target="_blank"}

如果是在windows環境下的話，就用教學中提供的job\.omni\.farm\.render\.kit，然後將其中的command改成電腦裡面的issac\-sim\.bat，然後在將這個job存到job store中，也就是透過上篇提到的方式，利用
```bash
python job_definition_upload.py job.omni.farm.render.kit --farm-url http://localhost:8222 --api-key change-me
```

但是教學這邊有提供一個local捷徑，就是不依靠queue API，而是直接將檔案存到目標資料夾，例如
```javascript
%LOCALAPPDATA%/nvidia/nv-svc-farm/job-definitions
C:\Users\YOURNAME\AppData\Local\NVIDIA\nv-svc-farm\job-definitions
```

其實queue API再上傳job的時候就是把檔案存到這邊，所以你也可以直接把\.kit複製進去，這樣比較省事，然後打開dashboard，就會發現出現這個job了。


![http://localhost:8222/queue/management/dashboard/jobs](/assets/1745b2c60c07/1*19ulcZ62yulsGbvvjT4N9w.png)

http://localhost:8222/queue/management/dashboard/jobs

當然，如果你的queue不是在local，那你就只乖乖地用API來上傳job上去。


![](/assets/1745b2c60c07/1*ig5L7JowCWXwigL-XX66og.png)



![](/assets/1745b2c60c07/1*OqLZL_kltmBgwSxLJWAfIQ.png)


然後回到Movie Capture，如果要使用farm就要打開extension中的Queue Setting，其中Queue instance預設使用本地的Queue，只要成功啟動前篇的ov farm即可，之後可以按右邊Open Dashboard來確認instance有沒有成功啟動，然後job\-type，預設就是剛剛定義好的 _create\-render_ ，基本上沒有東西要調整，最後就是按下Submit to Queue。


![](/assets/1745b2c60c07/1*QFSgeOh86xWOm0yvxsuG0g.png)


然後extension就會幫你submit這個task，回到dashboard應該可以看到有新增一個task正在running

我們可以來整理一下發生了什麼事情，首先你啟動的omniverse只是為了要使用movie capture，然後利用它submit了一個task\(要先啟動farm跟設定好job\)，實際上task是會依據job中定義的cammand的路徑\(例如issac\-sim\.bat\)再啟動一個omniverse來render圖片，有點像繞了一個圈做了跟第一階段一樣的事情。

換言之，如果所有東西都在local，你會發現你兜了一個大圈來執行render，但差別在於，如果當你的task開始run了之後，你就可以把包含movie capture的omniverse關閉，因為現在在local其實有兩個omniverse在執行，實際上跑render的那個是另一個App，換言之，我們現在也不能隨便暫停了，所有的控制要用queue去對agent控制，也就是在dashboard

如果想要取消，那就先選去對應的任務，然後從上面的bulk action中選取Cancel，然後按下apply過一陣子就會從cancelling變成cancelled了


![](/assets/1745b2c60c07/1*I-WWOnNih1Lm-UkapgxjIQ.png)



![](/assets/1745b2c60c07/1*v1qzlCQqoRGAw9EvCvEfzg.png)


最後一個階段就是如果是有遠端的queue的話，基本上操作跟上面一樣，只不過需要調整兩個地方，一個是Queue instance，其實它是可以編輯的，可以直接輸入遠端的URL，實際上本來的預設localhost queue就是http://localhost。


![](/assets/1745b2c60c07/1*3QbHZQYMHN1sx2zj1C-gbw.png)


另外，渲染完的圖片理論上不能直接傳到自己的電腦裡面，因為render的機器是在遠端，通常會使用NVIDIA Nucleus Server，只需要直接把Output中的path換成遠端的URL即可

至於其他Movie Capture這個extension的細節可以參考

[**Movie Capture \- Omniverse Extensions**](https://docs.omniverse.nvidia.com/extensions/latest/ext_core/ext_movie-capture.html){:target="_blank"} 
[_Movie Capture is an extension for Omniverse Kit\-based apps which allows you to easily render your output to high…_ docs\.omniverse\.nvidia\.com](https://docs.omniverse.nvidia.com/extensions/latest/ext_core/ext_movie-capture.html){:target="_blank"}

下一篇我們會介紹當job\_type為base時該怎麼render。



_[Post](https://medium.com/maochinn/ovx-%E5%AD%B8%E7%BF%92%E7%AD%86%E8%A8%98-01-using-movie-capture-to-render-1745b2c60c07){:target="_blank"} converted from Medium by [ZMediumToMarkdown](https://github.com/ZhgChgLi/ZMediumToMarkdown){:target="_blank"}._
