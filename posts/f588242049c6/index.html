<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="【Unity】Displacement Map" /><meta name="author" content="帽捲" /><meta property="og:locale" content="en" /><meta name="description" content="本篇要在Unity來解決一個用OpenGL很容易的問題，也就是位移貼圖(Displacement Map)，同時希望能夠動態調整與不同位移程度的mesh，舉例來說一個簡單的應用，總共會有三種變形程度的Mesh，分別表示0.0, 0.5…" /><meta property="og:description" content="本篇要在Unity來解決一個用OpenGL很容易的問題，也就是位移貼圖(Displacement Map)，同時希望能夠動態調整與不同位移程度的mesh，舉例來說一個簡單的應用，總共會有三種變形程度的Mesh，分別表示0.0, 0.5…" /><link rel="canonical" href="https://medium-to-jekyll-starter.zhgchg.li//posts/f588242049c6/" /><meta property="og:url" content="https://medium-to-jekyll-starter.zhgchg.li//posts/f588242049c6/" /><meta property="og:site_name" content="Medium To Jekyll Starter" /><meta property="og:image" content="https://medium-to-jekyll-starter.zhgchg.li//assets/f588242049c6/1*cMW6ZmpOT0rfDJ4_zha5tg.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-07-29T09:38:54+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://medium-to-jekyll-starter.zhgchg.li//assets/f588242049c6/1*cMW6ZmpOT0rfDJ4_zha5tg.png" /><meta property="twitter:title" content="【Unity】Displacement Map" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@帽捲" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"帽捲"},"dateModified":"2024-07-29T09:38:54+08:00","datePublished":"2024-07-29T09:38:54+08:00","description":"本篇要在Unity來解決一個用OpenGL很容易的問題，也就是位移貼圖(Displacement Map)，同時希望能夠動態調整與不同位移程度的mesh，舉例來說一個簡單的應用，總共會有三種變形程度的Mesh，分別表示0.0, 0.5…","headline":"【Unity】Displacement Map","image":"https://medium-to-jekyll-starter.zhgchg.li//assets/f588242049c6/1*cMW6ZmpOT0rfDJ4_zha5tg.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://medium-to-jekyll-starter.zhgchg.li//posts/f588242049c6/"},"url":"https://medium-to-jekyll-starter.zhgchg.li//posts/f588242049c6/"}</script><title>【Unity】Displacement Map | Medium To Jekyll Starter</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Medium To Jekyll Starter"><meta name="application-name" content="Medium To Jekyll Starter"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Medium To Jekyll Starter</a><p class="site-subtitle fst-italic mb-0">A text-focused Jekyll theme</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/github_username" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['example','domain.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>【Unity】Displacement Map</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>【Unity】Displacement Map</h1><p class="post-desc fw-light mb-4">本篇要在Unity來解決一個用OpenGL很容易的問題，也就是位移貼圖(Displacement Map)，同時希望能夠動態調整與不同位移程度的mesh，舉例來說一個簡單的應用，總共會有三種變形程度的Mesh，分別表示0.0, 0.5…</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1722217134" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 29, 2024 </time> </span> <span> Updated <time data-ts="1722217134" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jul 29, 2024 </time> </span><div class="mt-3 mb-3"> <a href="/assets/f588242049c6/1*cMW6ZmpOT0rfDJ4_zha5tg.png" class="popup img-link preview-img shimmer"><img src="/assets/f588242049c6/1*cMW6ZmpOT0rfDJ4_zha5tg.png" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="3749 words" > <em>20 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">【Unity】Displacement Map</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">【Unity】Displacement Map</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h3 id="unitydisplacement-map"><span class="me-2">【Unity】Displacement Map</span><a href="#unitydisplacement-map" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>本篇要在Unity來解決一個用OpenGL很容易的問題，也就是 <a href="https://en.wikipedia.org/wiki/Displacement_mapping" target="_blank">位移貼圖</a> (Displacement Map)，同時希望能夠動態調整與不同位移程度的mesh，舉例來說一個簡單的應用，總共會有三種變形程度的Mesh，分別表示0.0, 0.5, 1.0的變形狀況，隨機給定0~1的值去內插。</p><p><a href="https://www.youtube.com/watch?v=xEZLRzWZ4BU" target="_blank" class="img-link shimmer" ><img src="/assets/f588242049c6/9029_hqdefault.jpg" alt="Warping Mesh" title="Warping Mesh" loading="lazy"></a></p><p>事實上，如果不拘泥於一定要用Displacement map的話，至少有4種方法，分別是</p><ol><li>上中: <strong>GPU-based</strong> Multi-texture warped grid<li>左下: CPU-based Multi-shape warped grid (Skinned Mesh Renderer)<li>下中: CPU-based Multi-texture warped grid<li>右中: CPU-based Multi-UV Warped grid</ol><p>事實上， <strong>第2點</strong> 就是對應 <a href="https://medium.com/@maochinn/blender-%E5%AE%A2%E8%A3%BD%E5%8C%96%E5%BB%BA%E7%AB%8Bshape-keys-20537e3c427d?source=your_stories_page-------------------------------------" target="_blank">【Blender】客製化建立Shape Keys</a> ，可以在Blender利用不同的變形mesh建立多個shape，並輸出.fbx， <strong>第4點</strong> 則是對應 <a href="https://medium.com/@maochinn/blender-%E5%AE%A2%E8%A3%BD%E5%8C%96%E5%BB%BA%E7%AB%8Battributes-a1c22052f276?source=your_stories_page-------------------------------------" target="_blank">【Blender】客製化建立Attributes</a> ，把不同的變形mesh建立成多個Attribute，並輸出.obj，然後到Unity的Shader中用attribute自己內插。</p><p>最後， <a href="https://medium.com/maochinn/blender-%E5%AE%A2%E8%A3%BD%E5%8C%96%E5%BB%BA%E7%AB%8Btexture-8b414b22f7fb?source=your_stories_page-------------------------------------" target="_blank">【Blender】客製化建立Texture</a> 則是對應 <strong>第1點</strong> 與 <strong>第3點</strong> ，也就是本篇的重點，簡單來說，就是透過Blender將變形的mesh轉換成displacement map，差異在於，前者是使用Shader計算內插結果，後者是Script計算內插結果。</p><p>首先，先複習一下Displacement Map，基本上就是使用texture上的texel做為vertex移動的依據，例如最常見的height map就是一種Displacement Map，其利用texel的值做高低的位移，也就是單一方向的位移，倘若RGB都使用到，那基本上XYZ三維空間的位移。</p><p>同時，因為移動的距離通常較為精細，而一般pixel使用[0, 255]的值域範圍顯然不夠用，因此比起用unsigned char(8 bits)更常用float(32 bits)去儲存，而這種格式更常見的則是用在所謂的HDR texture，其為了要儲存照片中更多的色彩細節，因此需要更多的細分色階去儲存。</p><p><a href="/assets/f588242049c6/0*TsKicZ-bHrKsTPxq.jpg" class="popup img-link shimmer"><img src="/assets/f588242049c6/0*TsKicZ-bHrKsTPxq.jpg" alt="[https://upload.wikimedia.org/wikipedia/commons/a/a4/Displacement.jpg](https://upload.wikimedia.org/wikipedia/commons/a/a4/Displacement.jpg){:target=&quot;_blank&quot;}" loading="lazy"></a></p><p><a href="https://upload.wikimedia.org/wikipedia/commons/a/a4/Displacement.jpg" target="_blank">https://upload.wikimedia.org/wikipedia/commons/a/a4/Displacement.jpg</a></p><p>但是在Unity，使用half float(16 bit)更為常見，其只需要16*4 = 64 bits，顯然這個數字對於系統更友善一些，只是精準度較差，但在遊戲中基本上夠用了。</p><p><a href="https://www.techarthub.com/unity-texture-compression-cheat-sheet/" target="_blank" class="img-link shimmer" ><img src="https://techarthub.com/wp-content/uploads/unity-texture-compression-cheat-sheet-featured.jpg" alt="" loading="lazy"></a></p><p><a href="https://discussions.unity.com/t/floating-point-textures/775105" target="_blank">https://discussions.unity.com/t/floating-point-textures/775105</a></p><p>如果要使用HDR texture去做為Displacement Map會遇到許多問題，或者說，在Unity Shader中要正確使用HDR Texture至少有以下兩種方法。</p><p>簡單來說，就是在腳本中建立Texture，或者是從外部匯入Texture，然後再將其assign到Shader中計算內插，前者是在Runtime，也就是執行下去的時候才會建立一張displacement map，後者則是Offline事先建立一個圖檔，然後在專案中轉換成displacement map。值得注意的是，本篇專注於介紹在Unity如何正確使用HDR Texture，因此關於內插或是實作細節就不會一一介紹。</p><h4 id="從腳本建立hdr-texture"><span class="me-2">從腳本建立HDR Texture</span><a href="#從腳本建立hdr-texture" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>首先是一個比較單純的方法，但是比較麻煩一些，就是先寫一個腳本用來產生HDR texture，再把HDR Texture assign到Shader裡面，因此要先寫C#腳本用TextureFormat.RGBAHalf 產生 Texture2D，</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">var</span> <span class="n">texture</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Texture2D</span><span class="p">(</span><span class="n">table_width</span><span class="p">,</span> <span class="n">table_height</span><span class="p">,</span> <span class="n">TextureFormat</span><span class="p">.</span><span class="n">RGBAHalf</span><span class="p">,</span> <span class="k">false</span><span class="p">);</span>
</pre></table></code></div></div><p>然後就照著官方的 <a href="https://docs.unity3d.com/ScriptReference/Texture2D.Apply.html" target="_blank">教學</a> 去apply，每個Pixel使用Color去填，Color是用float去存每個顏色，基本上要把值域壓到[0, 1]，因此，舉例來說，如果本來的x的值是0~900，y的值是0~400，那麼在塞到Color前就要先除，只是這邊不用擔心如果值大於1會被clamp，因為是使用half去存，所以超過1的數字仍然會被保留，因此，理論上，你也可以不用壓到[0, 1]，但是習慣跟檢視上我們還是習慣normalize，整個過程類似這樣</p><div class="language-csharp highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">j</span> <span class="p">&lt;</span> <span class="n">texture</span><span class="p">.</span><span class="n">height</span><span class="p">;</span> <span class="n">j</span><span class="p">++)</span>
<span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">texture</span><span class="p">.</span><span class="n">width</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">x</span><span class="p">;</span>  <span class="c1">// TODO</span>
        <span class="kt">float</span> <span class="n">y</span><span class="p">;</span>  <span class="c1">// TODO</span>

        <span class="n">Color</span> <span class="n">color</span><span class="p">;</span>
        <span class="n">color</span><span class="p">.</span><span class="n">r</span> <span class="p">=</span> <span class="n">x</span> <span class="p">/</span> <span class="m">900.0f</span><span class="p">;</span>
        <span class="n">color</span><span class="p">.</span><span class="n">g</span> <span class="p">=</span> <span class="n">y</span> <span class="p">/</span> <span class="m">400.0f</span><span class="p">;</span>
        <span class="n">color</span><span class="p">.</span><span class="n">b</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
        <span class="n">color</span><span class="p">.</span><span class="n">a</span> <span class="p">=</span> <span class="m">1.0f</span><span class="p">;</span>

        <span class="n">texture</span><span class="p">.</span><span class="nf">SetPixel</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">color</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="n">texture</span><span class="p">.</span><span class="nf">Apply</span><span class="p">();</span>
</pre></table></code></div></div><p>其中XY座標就看你要怎麼輸入進來，可以透過其他貼圖或是寫死在腳本裡面，接著再把Texture設置到Renderer的Material中，</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">Renderer</span> <span class="n">renderer</span> <span class="o">=</span> <span class="nc">GetComponent</span><span class="o">&lt;</span><span class="nc">Renderer</span><span class="o">&gt;();</span>
<span class="n">renderer</span><span class="o">.</span><span class="na">material</span><span class="o">.</span><span class="na">SetTexture</span><span class="o">(</span><span class="s">"_DisplacementMap"</span><span class="o">,</span> <span class="n">texture</span><span class="o">);</span>

<span class="k">this</span><span class="o">.</span><span class="na">transform</span><span class="o">.</span><span class="na">localScale</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Vector3</span><span class="o">(</span><span class="mf">900.0f</span><span class="o">,</span> <span class="mf">400.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">);</span>
</pre></table></code></div></div><p>其中，掛載這個Script的GameObject長得如下，有4個Component，Transform、Mesh Filter、Mesh Renderer、Script、Material(Shader)，可以注意到Transform中Scale會被我設定為(900, 400, 1)，這是因為我們在填displacement map時有除以(900, 400)，因此依照這個Map位移出來的Mesh會在0~1之間，所以要把每個vertex再乘回來。</p><p><a href="/assets/f588242049c6/1*rKRBsQMgePOlnHSTPmw45Q.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*rKRBsQMgePOlnHSTPmw45Q.png" alt="GameObject" loading="lazy"></a></p><p>GameObject</p><p>其中比較重要的是Mesh是我先在Blender建模好的，總共21*9=189個vertices，主要是因為我的Map也是21*9個pixel，但其實不用一一對應沒關係。Material則是自己寫的Shader，其中一個Texture是預設的，另一個是Displacement Map</p><p><a href="/assets/f588242049c6/1*XgOPoWuL0ziQEgGmKmtjFg.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*XgOPoWuL0ziQEgGmKmtjFg.png" alt="" loading="lazy"></a></p><p><a href="/assets/f588242049c6/1*roBy4-JmFX2cvv-7NIfsDw.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*roBy4-JmFX2cvv-7NIfsDw.png" alt="Mesh、Material" loading="lazy"></a></p><p>Mesh、Material</p><p>Shader的部分長得像這樣，重點在vertex shader，因為Mesh當初是我自己建模的，我有設定好左下角是(0, 0)，右上角是(1, 1)，因此這邊直接拿Position當作UV使用，用 <em>tex2D</em> 去對displacement map採樣，得到一組座標，然後再將該座標從Model Space轉換到Clip Space拿來當作vertex shader的輸出。</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="n">v2f</span> <span class="nf">vert</span><span class="o">(</span><span class="n">appdata</span> <span class="n">v</span><span class="o">)</span>
<span class="o">{</span>
    <span class="n">v2f</span> <span class="n">o</span><span class="o">;</span>
    <span class="n">o</span><span class="o">.</span><span class="na">vertex</span> <span class="o">=</span> <span class="nc">UnityObjectToClipPos</span><span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="na">vertex</span><span class="o">);</span>
    <span class="n">o</span><span class="o">.</span><span class="na">uv</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">vertex</span><span class="o">.</span><span class="na">xy</span><span class="o">;</span> <span class="c1">// predefine: grid in model space == uv space</span>

    <span class="n">float2</span> <span class="n">uv</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">vertex</span><span class="o">.</span><span class="na">xy</span><span class="o">;</span>
    <span class="n">float4</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">tex2D</span><span class="o">(</span><span class="n">_DisplacementMap</span><span class="o">,</span> <span class="n">_DisplacementMap_TexelSize</span><span class="o">,</span> <span class="n">uv</span><span class="o">);</span>


    <span class="n">o</span><span class="o">.</span><span class="na">vertex</span> <span class="o">=</span> <span class="nc">UnityObjectToClipPos</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">o</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>可以注意到 <em>tex2D( )</em> 是我自己寫的，簡單來說就是拿UV去對displacement map採樣，但是採樣時要解決 <a href="../cd004cee4968/">Half-texel Offset</a> ，細節這邊不詳述。</p><div class="language-go highlighter-rouge"><div class="code-header"> <span data-label-text="Go"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">float4</span> <span class="n">tex2D</span><span class="p">(</span><span class="n">sampler2D</span> <span class="k">map</span><span class="p">,</span> <span class="n">float2</span> <span class="n">size</span><span class="p">,</span> <span class="n">float2</span> <span class="n">uv</span><span class="p">)</span> <span class="p">{</span>
    <span class="c">// Filter Mode is Bilinear, not necessary if mode is Point(Nearest)</span>
    <span class="c">// scale by center</span>
    <span class="n">uv</span> <span class="o">-=</span> <span class="m">0.5</span><span class="p">;</span>                  <span class="c">// [0, 1] -&gt; [-0.5, 0.5]</span>
    <span class="n">uv</span> <span class="o">*=</span> <span class="p">(</span><span class="n">size</span> <span class="o">-</span> <span class="m">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">size</span><span class="p">;</span>    
    <span class="n">uv</span> <span class="o">+=</span> <span class="m">0.5</span><span class="p">;</span>                  <span class="c">// [-0.5, 0.5] -&gt; [0, 1]</span>

    <span class="k">return</span> <span class="n">tex2Dlod</span><span class="p">(</span><span class="k">map</span><span class="p">,</span> <span class="n">float4</span><span class="p">(</span><span class="n">uv</span><span class="p">,</span> <span class="m">0.0</span><span class="p">,</span> <span class="m">1.0</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><p>如此就可以將mesh變形，舉個例子來說，(1, 1)這個位置的vertex如果完全不做任何事情，也就是不做位移的話，同時因為Scale設定成(900, 400)，那就會被 <em>UnityObjectToClipPos</em> 轉換到(1.0 * 900, 1.0 * 400)再轉換到clip space。</p><p>一個比較實際的例子是，假設Displacement Map在UV是(1, 1)對應的RG值是(0.3, 1.3)，那麼此時在</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">float4</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">tex2D</span><span class="o">(</span><span class="n">_DisplacementMap</span><span class="o">,</span> <span class="n">_DisplacementMap_TexelSize</span><span class="o">,</span> <span class="n">uv</span><span class="o">);</span>
</pre></table></code></div></div><p>這行得到的值就是 <em>vertex</em> 的值是(0.3, 1.3, 0.0, 1.0)，</p><div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="py">o.vertex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">UnityObjectToClipPos(vertex);</span>
</pre></table></code></div></div><p>接著 <em>UnityObjectToClipPos</em> 則是會將(0.3, 1.3, 0.0, 1.0)乘上(900, 400, 1.0, 1.0)再轉換到clip space，也就是最終(1, 1)這個位置的值會變成(0.3 * 900, 1.3 * 400) = (270, 520)。</p><h4 id="從-外部匯入texture"><span class="me-2">從 <strong>外部匯入Texture</strong></span><a href="#從-外部匯入texture" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>實際上，大多數的情況下，Table或是Map都是offline產生的，也就是可能會先將map儲存成圖檔之類的，而不會像這樣寫死在程式碼中，再用腳本生成，因此比較直覺的想法是，不透過腳本直接將Map放到Shader裡面計算，除了讓事情比較單純都在Shader中計算之外，在GPU計算比在CPU計算還要有效率，雖然這牽涉到Map是否會頻繁更新等其他更實務的問題，這邊就不展開。</p><p>而是這麼做的好處是，不用在Unity掛腳本，可以在別的地方事先輸出好Map的圖檔，如果要替換直接丟到專案中，這樣也很容易替換</p><p><a href="/assets/f588242049c6/1*a-YrLFnwYg47H0mVjCR8tw.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*a-YrLFnwYg47H0mVjCR8tw.png" alt="" loading="lazy"></a></p><p>其中，Map會使用.exr之類的HDR圖片格式，而不是使用常見的png, jpg等，只是坑就在這裡。</p><p>首先，要記得把Format改成RGBA Half，值才不會跑掉，更準確地來說，要看Texture2D.format，只有RGBAHalf、RGBAFloat才會用float去存，其他格式都會把Map中的值clamp to [0, 1]，也就是雖然Map原始的值有超出0~1範圍的話會被直接壓到0或1。</p><p><a href="/assets/f588242049c6/1*CvKoBd8HmjlaZkda_DO82g.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*CvKoBd8HmjlaZkda_DO82g.png" alt="" loading="lazy"></a></p><p>另外，介面上只讓你調成half，或許是部分平台不支援32bit float。</p><p>然後還沒完，Vertex Shader的部分大同小異，但是要記得做Gamma <strong>反校正</strong> ，至於什麼是 <a href="https://en.wikipedia.org/wiki/Gamma_correction" target="_blank">Gamma校正</a> 就超出本篇範圍，簡單來說就是要把值做2.2次方，其中，將Linear Space經過Gamma=2.2轉換出來的空間基本上就是所謂的sRGB。</p><div class="language-ini highlighter-rouge"><div class="code-header"> <span data-label-text="Ini"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="py">vertex.rgb</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">pow(vertex.rgb, 2.2);</span>
</pre></table></code></div></div><p>因此，這行就是將Displacement Map的值從sRGB(為了配合API，姑且稱為Gamma Space)轉回Linear Space，因為我們定義好的Texture是在Linear Space，這個轉換的過程可以用Unity提供的 <em>GammaToLinearSpaceExact</em> 。</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="n">v2f</span> <span class="nf">vert</span><span class="o">(</span><span class="n">appdata</span> <span class="n">v</span><span class="o">)</span>
<span class="o">{</span>
    <span class="n">v2f</span> <span class="n">o</span><span class="o">;</span>
    <span class="n">o</span><span class="o">.</span><span class="na">vertex</span> <span class="o">=</span> <span class="nc">UnityObjectToClipPos</span><span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="na">vertex</span><span class="o">);</span>
    <span class="n">o</span><span class="o">.</span><span class="na">uv</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">vertex</span><span class="o">.</span><span class="na">xy</span><span class="o">;</span> <span class="c1">// predefine: grid in model space == uv space</span>

    <span class="n">sampler2D</span> <span class="n">map0</span> <span class="o">=</span> <span class="n">_Warping</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="o">?</span> <span class="n">_LowerMap</span> <span class="o">:</span> <span class="n">_MiddleMap</span><span class="o">;</span>
    <span class="n">sampler2D</span> <span class="n">map1</span> <span class="o">=</span> <span class="n">_Warping</span> <span class="o">&lt;</span> <span class="mf">0.5</span> <span class="o">?</span> <span class="n">_MiddleMap</span> <span class="o">:</span> <span class="n">_UpperMap</span><span class="o">;</span>

    <span class="n">float2</span> <span class="n">uv</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="na">vertex</span><span class="o">.</span><span class="na">xy</span><span class="o">;</span>
    <span class="n">float4</span> <span class="n">vertex</span> <span class="o">=</span> <span class="n">tex2D</span><span class="o">(</span><span class="n">_DisplacementMap</span><span class="o">,</span> <span class="n">_DisplacementMap_TexelSize</span><span class="o">,</span> <span class="n">uv</span><span class="o">);</span>
     
    <span class="c1">// for Linear HDR texture, if project setting is GAMMA SPACE, we have to transform texel to linear space</span>
    <span class="c1">// Because Unity would Linear HDR Texture transform to Gamma(2.2) Texture, automatically</span>
    <span class="c1">// vertex.rgb = pow(vertex.rgb, 2.2)</span>
    <span class="c1">// vertex.rgb = GammaToLinearSpace(vertex.rgb);</span>
    <span class="n">vertex</span><span class="o">.</span><span class="na">r</span> <span class="o">=</span> <span class="nc">GammaToLinearSpaceExact</span><span class="o">(</span><span class="n">vertex</span><span class="o">.</span><span class="na">r</span><span class="o">);</span>
    <span class="n">vertex</span><span class="o">.</span><span class="na">g</span> <span class="o">=</span> <span class="nc">GammaToLinearSpaceExact</span><span class="o">(</span><span class="n">vertex</span><span class="o">.</span><span class="na">g</span><span class="o">);</span>
    <span class="n">vertex</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="nc">GammaToLinearSpaceExact</span><span class="o">(</span><span class="n">vertex</span><span class="o">.</span><span class="na">b</span><span class="o">);</span>

    <span class="c1">// uv space == model space</span>
    <span class="n">o</span><span class="o">.</span><span class="na">vertex</span> <span class="o">=</span> <span class="nc">UnityObjectToClipPos</span><span class="o">(</span><span class="n">vertex</span><span class="o">);</span>

    <span class="k">return</span> <span class="n">o</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>這邊一定會很疑惑，為什麼我要做 <strong>反校正</strong> ？我甚麼時候做轉換的？答案是，Unity幫你做轉換的，當你把HDR圖檔import到專案的時候Unity會偵測到是HDR檔案，會幫你把值從Linear Space轉換到Gamma Space方便後續檢視，但是如果你是在腳本自己建立HDR Map的話，那Unity就不會這麼貼心的去 <strong>竄改你的值</strong> 。因此 <strong>從外部匯入Texture</strong> 的壞處是，要記得在 <strong>多寫一些轉換。</strong></p><p>那有沒有辦法去讓Unity不要竄改你的值呢？參考 <a href="https://forum.unity.com/threads/how-to-get-argbfloat-render-texture-data-without-colorspace-interfering.770558/" target="_blank">這篇</a> ，可以，告訴Unity整個專案都是在Linear Space下計算，這樣自然不會幫你轉換到Gamma Space，但這樣的設置傷筋動骨、茲事體大，因此比較簡單的做法還是在自己做反校正。</p><p><a href="https://docs.unity3d.com/Manual/LinearRendering-LinearTextures.html" target="_blank" class="img-link shimmer" ><img src="https://unity3d.com/files/images/ogimg.jpg" alt="" loading="lazy"></a></p><p><a href="https://docs.unity3d.com/Manual/LinearRendering-LinearOrGammaWorkflow.html" target="_blank" class="img-link shimmer" ><img src="https://unity3d.com/files/images/ogimg.jpg" alt="" loading="lazy"></a></p><p>但是要注意的是，實際應用上，這兩者都是在Runtime動態調整位移程度，藉由三個不同變形程度的Mesh，差異在於，前者會在腳本中會內插出結果的Mesh，再建立出HDR Texture的Map，然後assign到shader，後者則是直接匯入圖檔，接著全部assign到shader，然後在shader計算內插結果。</p><p>另外補充一下相同應用下其他兩個方法，也就是開頭提到的其他方式，也就是不使用Map的話。</p><p><em>CPU-based Multi-shape warped grid</em> 就是借用Animtation的Skinned Mesh Renderer，把變形後的Mesh變成一個Shape去做內插。又或者 <em>CPU-based Multi-UV Warped grid</em> 就是直接把map中21*9的值直接當作21*9個vertex的attribute，自己寫Shader內插。這兩者缺點是，vertex跟map等於綁在一起，如果map要改變則整個mesh也要換掉。</p><p>總之，如果有做成功，基本上四個方法結果應該一致，只是自己取捨哪種方法比較好。</p><p>基本上如果完全不想寫程式，那就是把他用Blender之類的把mesh編輯成Skinned Mesh，如果願意寫Unity的Shader就把變形後的結果存在每個vertex上，在shader中內插，接下來如果考量到替換方便，才會使用displacement map，但這又分為offline跟runtime，runtime主要是看這個map是否會隨時變動，那麼這就只能使用runtime，而其他方式都只能在執行前先計算好，寫死在專案裡面。</p><p><a href="/assets/f588242049c6/1*cMW6ZmpOT0rfDJ4_zha5tg.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*cMW6ZmpOT0rfDJ4_zha5tg.png" alt="" loading="lazy"></a></p><p>總而言之，要達到相同的結果方法百百種，只要懂電腦圖學光是在unity中就可以玩出很多花樣，</p><p>補充一點，Gamma校正跟DecodeHDR沒有關係，DecodeHDR是利用a channel把rgb從[0,1]decode到[ -9999, 9999]，用於RGBM之類的。</p><p>另外，常見的Gamma校正長得像這樣</p><div class="language-cpp highlighter-rouge"><div class="code-header"> <span data-label-text="Cpp"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="c1">// do super fancy lighting in linear space</span>
    <span class="p">[...]</span>
    <span class="c1">// apply gamma correction</span>
    <span class="kt">float</span> <span class="n">gamma</span> <span class="o">=</span> <span class="mf">2.2</span><span class="p">;</span>
    <span class="n">FragColor</span><span class="p">.</span><span class="n">rgb</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="n">fragColor</span><span class="p">.</span><span class="n">rgb</span><span class="p">,</span> <span class="n">vec3</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">gamma</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><p><a href="https://learnopengl.com/Advanced-Lighting/Gamma-Correction" target="_blank"><strong>Gamma Correction</strong></a> <a href="https://learnopengl.com/Advanced-Lighting/Gamma-Correction" target="_blank"><em>Learn OpenGL . com provides good and clear modern 3.3+ OpenGL tutorials with clear examples. A great resource to learn…</em> learnopengl.com</a></p><p><a href="https://zhuanlan.zhihu.com/p/66558476" target="_blank"><strong>Gamma、Linear、sRGB 和Unity Color Space，你真懂了吗？</strong></a> <a href="https://zhuanlan.zhihu.com/p/66558476" target="_blank"><em>“为什么我渲染出来的场景，总是感觉和真实世界不像呢？” 游戏从业者或多或少都听过Linear、Gamma、sRGB和伽马校正这些术语，互联网上也有很多科普的资料，但是它们似乎又都没有讲很&#34;清楚&#34;。 游戏界（特…</em> zhuanlan.zhihu.com</a></p><p><a href="https://www.zhihu.com/tardis/zm/art/337052514?source_id=1003" target="_blank"><strong>Unity Color Space: Gamma vs Linear</strong></a> <a href="https://www.zhihu.com/tardis/zm/art/337052514?source_id=1003" target="_blank"><em>一般情况下美术提供的Albedo等贴图是在Gamma Color Space下的，即相对于Linear Color Space，Albedo等贴图的颜色值进行了1/2.2次方（近似）。另外一种是Normal…</em> www.zhihu.com</a></p><p>但是實際測試過會發現結果與unity提供的 <em>GammaToLinearSpaceExact</em> 結果並不一致，從code中可以發現Unity中有定義 <em>UNITY_COLORSPACE_GAMMA</em> 這個Marco，進一步才發現有提供 <em>GammaToLinearSpace</em> 和 <em>GammaToLinearSpaceExact</em></p><p><a href="/assets/f588242049c6/1*RWktCgYM-r5o59TmL1Qsjw.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*RWktCgYM-r5o59TmL1Qsjw.png" alt="" loading="lazy"></a></p><p>打開就會發現，pow(2.2)只是其中一部份而已。</p><p><a href="/assets/f588242049c6/1*1Wk4m0qhELyEUD4iZoehcQ.png" class="popup img-link shimmer"><img src="/assets/f588242049c6/1*1Wk4m0qhELyEUD4iZoehcQ.png" alt="" loading="lazy"></a></p><p><a href="https://www.zhihu.com/tardis/zm/art/337052514?source_id=1003" target="_blank"><strong>Unity Color Space: Gamma vs Linear</strong></a> <a href="https://www.zhihu.com/tardis/zm/art/337052514?source_id=1003" target="_blank"><em>一般情况下美术提供的Albedo等贴图是在Gamma Color Space下的，即相对于Linear Color Space，Albedo等贴图的颜色值进行了1/2.2次方（近似）。另外一种是Normal…</em> www.zhihu.com</a></p><p><a href="https://zhuanlan.zhihu.com/p/76514978" target="_blank"><strong>Unity Gamma空间还原Linear空间效果</strong></a> <a href="https://zhuanlan.zhihu.com/p/76514978" target="_blank"><em>已经有很多大佬写过关于Gamma空间和Linear空间的文章了，都写的很详细了，原理也都分析的很清楚了。所以就不在细说这些了，这里说下在Unity的Gamma空间要怎么来还原linear空间的效果，主要是针对PBR的渲染效果。 …</em> zhuanlan.zhihu.com</a></p><p><a href="https://zhuanlan.zhihu.com/p/491961724" target="_blank"><strong>unity shader 源码阅读（基础三）</strong></a> <a href="https://zhuanlan.zhihu.com/p/491961724" target="_blank"><em>1、线性空间（linear）和 伽马空间（gamma） 在项目里经常有人会提到伽马校正和Unity Color Space，但很多人不知道为什么。 这里必须提到一个概念sRGB对应的…</em> zhuanlan.zhihu.com</a></p><p><a href="https://www.jianshu.com/p/a8b6ec428823" target="_blank" class="img-link shimmer" ><img src="https://upload-images.jianshu.io/upload_images/26934647-faf7d65abdb1d711.png" alt="" loading="lazy"></a></p><p><a href="https://discourse.threejs.org/t/how-to-get-pixel-data-from-maps/25966/4" target="_blank"><strong>How to get pixel data from maps</strong></a> <a href="https://discourse.threejs.org/t/how-to-get-pixel-data-from-maps/25966/4" target="_blank"><em>Hello there! I have a some objects in my scene. Objects it’s a bufferGeometries with different maps: Map, bumpMap and…</em> discourse.threejs.org</a></p><p><a href="https://imgtec.eetrend.com/blog/2023/100571694.html" target="_blank"><strong>走进纹理科学，看穿底层逻辑，耗时的背后竟然是. . . . . .</strong></a> <a href="https://imgtec.eetrend.com/blog/2023/100571694.html" target="_blank"><em>像素是纹理最基本的组成单位，而 Unity 有多种用 C# 脚本读写像素数据的方法。这样就可以实现复制、更新纹理等多种功能，比如给玩家的头像加上装饰、读取地图的纹理来决定物体的摆放位置等。…</em> imgtec.eetrend.com</a></p><p><a href="https://docs.unity3d.com/ScriptReference/Texture2D.GetPixelData.html" target="_blank" class="img-link shimmer" ><img src="https://unity3d.com/files/images/ogimg.jpg" alt="" loading="lazy"></a></p><p><a href="https://docs.unity3d.com/ScriptReference/Texture2D.GetRawTextureData.html" target="_blank" class="img-link shimmer" ><img src="https://unity3d.com/files/images/ogimg.jpg" alt="" loading="lazy"></a></p><p><a href="https://home.gamer.com.tw/artwork.php?sn=5522710" target="_blank" class="img-link shimmer" ><img src="https://p2.bahamut.com.tw/HOME/creationCover/10/0005522710_B.JPG" alt="" loading="lazy"></a></p><p><em><a href="https://medium.com/maochinn/unity-displacement-map-f588242049c6" target="_blank">Post</a> converted from Medium by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/maochinn/">Maochinn</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/unity/" class="post-tag no-text-decoration" >unity</a> <a href="/tags/computer-graphics/" class="post-tag no-text-decoration" >computer-graphics</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E3%80%90Unity%E3%80%91Displacement%20Map%20-%20Medium%20To%20Jekyll%20Starter&url=https%3A%2F%2Fmedium-to-jekyll-starter.zhgchg.li%2F%2Fposts%2Ff588242049c6%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E3%80%90Unity%E3%80%91Displacement%20Map%20-%20Medium%20To%20Jekyll%20Starter&u=https%3A%2F%2Fmedium-to-jekyll-starter.zhgchg.li%2F%2Fposts%2Ff588242049c6%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmedium-to-jekyll-starter.zhgchg.li%2F%2Fposts%2Ff588242049c6%2F&text=%E3%80%90Unity%E3%80%91Displacement%20Map%20-%20Medium%20To%20Jekyll%20Starter" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/83f3d470b656/">【自動化】學習筆記 — 01：硬體</a><li class="text-truncate lh-lg"> <a href="/posts/de28dc8582ec/">【自動化】學習筆記 — 00</a><li class="text-truncate lh-lg"> <a href="/posts/6560b300f03c/">【工作】NVIDIA GTC Taipai 2025 — Day 0：Building Digital Twins for Physical AI With NVIDIA Omniverse</a><li class="text-truncate lh-lg"> <a href="/posts/230d146467b3/">【工作】NVIDIA GTC Taipai 2025 — Day 1：Manufacturing sessions</a><li class="text-truncate lh-lg"> <a href="/posts/616f6e63db42/">【工作】NVIDIA GTC Taipai 2025 — Day 2：Physical Al and Robotics Sessions</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/computer-graphics/">computer-graphics</a> <a class="post-tag btn btn-outline-primary" href="/tags/omniverse/">omniverse</a> <a class="post-tag btn btn-outline-primary" href="/tags/digital-art/">digital-art</a> <a class="post-tag btn btn-outline-primary" href="/tags/nvidia/">nvidia</a> <a class="post-tag btn btn-outline-primary" href="/tags/blender/">blender</a> <a class="post-tag btn btn-outline-primary" href="/tags/krenz/">krenz</a> <a class="post-tag btn btn-outline-primary" href="/tags/business-trip/">business-trip</a> <a class="post-tag btn btn-outline-primary" href="/tags/siggraph/">siggraph</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%9B%BB%E8%85%A6%E5%9C%96%E5%AD%B8/">電腦圖學</a> <a class="post-tag btn btn-outline-primary" href="/tags/cosmos/">cosmos</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/7b98d6e88641/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1695303874" data-df="ll" > Sep 21, 2023 </time><h4 class="pt-0 my-2">【Unity】Multipass Rendering</h4><div class="text-muted"><p>首先，這邊要做的事情非常簡單，就是將相機畫面render到一個Texture上，然後再render到遊戲畫面(Display)上，這件事情就是Multipass Rendering，也就是render兩次(Two…</p></div></div></a></article><article class="col"> <a href="/posts/a185240f841b/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1613993811" data-df="ll" > Feb 22, 2021 </time><h4 class="pt-0 my-2">【Pytorch3D】Motion Path Editing</h4><div class="text-muted"><p>先寫一些我要記錄的東西好了，一天到晚挖坑都不填的</p></div></div></a></article><article class="col"> <a href="/posts/b144f23b5bb5/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1593854848" data-df="ll" > Jul 4, 2020 </time><h4 class="pt-0 my-2">FLTK建置</h4><div class="text-muted"><p>FLTK算是蠻老的一個C++…</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/8b414b22f7fb/" class="btn btn-outline-primary" aria-label="Older" ><p>【Blender】客製化建立Texture</p></a> <a href="/posts/47bbcbdc8820/" class="btn btn-outline-primary" aria-label="Newer" ><p>【開箱】ROG Zephyrus G16 (2024) GA605 + ADAM CASA Hub Stand Pro</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://twitter.com/username">your_full_name</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.<br/> Automatically sync posts from Medium with <a href="https://zhgchg.li/posts/en-medium-to-jekyll/" target="_blank">ZhgChg.Li</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/computer-graphics/">computer-graphics</a> <a class="post-tag btn btn-outline-primary" href="/tags/omniverse/">omniverse</a> <a class="post-tag btn btn-outline-primary" href="/tags/digital-art/">digital-art</a> <a class="post-tag btn btn-outline-primary" href="/tags/nvidia/">nvidia</a> <a class="post-tag btn btn-outline-primary" href="/tags/blender/">blender</a> <a class="post-tag btn btn-outline-primary" href="/tags/krenz/">krenz</a> <a class="post-tag btn btn-outline-primary" href="/tags/business-trip/">business-trip</a> <a class="post-tag btn btn-outline-primary" href="/tags/siggraph/">siggraph</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%9B%BB%E8%85%A6%E5%9C%96%E5%AD%B8/">電腦圖學</a> <a class="post-tag btn btn-outline-primary" href="/tags/cosmos/">cosmos</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
