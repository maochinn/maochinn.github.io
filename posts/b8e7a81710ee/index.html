<!doctype html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="【Omniverse】Development 102: Scripting Properties and Metadata" /><meta name="author" content="帽捲" /><meta property="og:locale" content="en" /><meta name="description" content="In 【Omniverse】Development 102: Working With Prims and Default Schemas, we learned how to directly modify the content of .usd to add and…" /><meta property="og:description" content="In 【Omniverse】Development 102: Working With Prims and Default Schemas, we learned how to directly modify the content of .usd to add and…" /><link rel="canonical" href="https://medium-to-jekyll-starter.zhgchg.li//posts/b8e7a81710ee/" /><meta property="og:url" content="https://medium-to-jekyll-starter.zhgchg.li//posts/b8e7a81710ee/" /><meta property="og:site_name" content="Medium To Jekyll Starter" /><meta property="og:image" content="https://medium-to-jekyll-starter.zhgchg.li//assets/b8e7a81710ee/1*ICKb_BFwpmxz-bRXHJp-zw.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-02-06T18:15:15+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://medium-to-jekyll-starter.zhgchg.li//assets/b8e7a81710ee/1*ICKb_BFwpmxz-bRXHJp-zw.png" /><meta property="twitter:title" content="【Omniverse】Development 102: Scripting Properties and Metadata" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@帽捲" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"帽捲"},"dateModified":"2025-02-06T18:21:11+08:00","datePublished":"2025-02-06T18:15:15+08:00","description":"In 【Omniverse】Development 102: Working With Prims and Default Schemas, we learned how to directly modify the content of .usd to add and…","headline":"【Omniverse】Development 102: Scripting Properties and Metadata","image":"https://medium-to-jekyll-starter.zhgchg.li//assets/b8e7a81710ee/1*ICKb_BFwpmxz-bRXHJp-zw.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://medium-to-jekyll-starter.zhgchg.li//posts/b8e7a81710ee/"},"url":"https://medium-to-jekyll-starter.zhgchg.li//posts/b8e7a81710ee/"}</script><title>【Omniverse】Development 102: Scripting Properties and Metadata | Medium To Jekyll Starter</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Medium To Jekyll Starter"><meta name="application-name" content="Medium To Jekyll Starter"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.13/dayjs.min.js,npm/dayjs@1.11.13/locale/en.js,npm/dayjs@1.11.13/plugin/relativeTime.js,npm/dayjs@1.11.13/plugin/localizedFormat.js,npm/tocbot@4.32.2/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.min.js?baseurl=&register=true" ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="/assets/img/avatar.png" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Medium To Jekyll Starter</a><p class="site-subtitle fst-italic mb-0">A text-focused Jekyll theme</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/github_username" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener noreferrer" > <i class="fa-brands fa-x-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['example','domain.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>【Omniverse】Development 102: Scripting Properties and Metadata</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>【Omniverse】Development 102: Scripting Properties and Metadata</h1><p class="post-desc fw-light mb-4">In 【Omniverse】Development 102: Working With Prims and Default Schemas, we learned how to directly modify the content of .usd to add and…</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1738836915" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 6, 2025 </time> </span> <span> Updated <time data-ts="1738837271" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 6, 2025 </time> </span><div class="mt-3 mb-3"> <a href="/assets/b8e7a81710ee/1*ICKb_BFwpmxz-bRXHJp-zw.png" class="popup img-link preview-img shimmer"><img src="/assets/b8e7a81710ee/1*ICKb_BFwpmxz-bRXHJp-zw.png" alt="Preview Image" width="1200" height="630" loading="lazy"></a></div><div class="d-flex justify-content-between"> <span> By <em> </em> </span><div> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="4176 words" > <em>23 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">【Omniverse】Development 102: Scripting Properties and Metadata</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">【Omniverse】Development 102: Scripting Properties and Metadata</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><h3 id="omniversedevelopment-102-scripting-properties-and-metadata"><span class="me-2">【Omniverse】Development 102: Scripting Properties and Metadata</span><a href="#omniversedevelopment-102-scripting-properties-and-metadata" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>中文版本： <a href="../a7fa6a26a49a/">【Omniverse】學習筆記 — 05：Property and Metadata</a></p><p>In <a href="../5732179f7159/">【Omniverse】Development 102: Working With Prims and Default Schemas</a> , we learned how to directly modify the content of .usd to add and modify the prim in the layer. This article will use the OpenUSD API in the built-in <strong>Script Editor</strong> of Omniverse to interact with all the data in the prim and even the stage. You can think of it as modifying the .usda file through Python Script instead of manually modifying the content as we did in the past.</p><p>In order to use <strong>Script Editor</strong> in Omniverse, a more convenient way is to start it in debug mode. For details, please refer to <a href="../78f8915183be/">【Omniverse】Development 101: Getting Started with Kit-Based Development</a> .</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span data-label-text="TypeScript"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="p">.</span><span class="err">\</span><span class="nx">repo</span><span class="p">.</span><span class="nx">bat</span> <span class="nx">launch</span> <span class="o">-</span><span class="nx">d</span>
</pre></table></code></div></div><p>Whether it is Composer or Editor, you can find it in Menu (Developer &gt; Script Editor) after launching it</p><p><a href="/assets/b8e7a81710ee/0*6gjgZJh3N0NbgXg9.png" class="popup img-link shimmer"><img src="/assets/b8e7a81710ee/0*6gjgZJh3N0NbgXg9.png" alt="Figure 1: Developer &gt; Script Editor" loading="lazy"></a></p><p>Figure 1: Developer &gt; Script Editor</p><p>When the Script Editor is opened, as shown on the left, it allows you to quickly try out some API functions. Of course, you can also create an extension to test the API yourself. At this time, you can use VS Code Link to trace to the bottom layer, <strong>but this article only needs to use Script Editor</strong> .</p><p><a href="/assets/b8e7a81710ee/1*tKA1MMTsIMc1h01QSXQtbw.png" class="popup img-link shimmer"><img src="/assets/b8e7a81710ee/1*tKA1MMTsIMc1h01QSXQtbw.png" alt="Figure 2: Script Editor" loading="lazy"></a></p><p>Figure 2: Script Editor</p><h3 id="learn-openusd-using-attributes"><span class="me-2">Learn OpenUSD: Using Attributes</span><a href="#learn-openusd-using-attributes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The course mainly talks about how to use the OpenUSD API to set/get prim’s attributes. For example, it is like the <code class="language-plaintext highlighter-rouge">size</code> of the <code class="language-plaintext highlighter-rouge">Cube</code> in <a href="../5732179f7159/">【Omniverse】Development 102: Working With Prims and Default Schemas</a> .</p><p>Of course, we can achieve this by directly modifying .usda manually, but we can also automate the operation through scripts.</p><p><a href="https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-19+V1" target="_blank"><strong>Course Detail | NVIDIA</strong></a> <a href="https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-19+V1" target="_blank"><em>About Course Objectives Topics Covered Course Outline Stay Informed Contact Us</em> learn.nvidia.com</a></p><p>We can first use the OpenUSD Python API to create a prim to try it out. First, manually clear all prims in the entire stage, then enter the following script in the Script Editor, and then press Run, as shown in the lower left corner of Figure 2</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>

<span class="n">scope</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="p">.</span><span class="n">Scope</span><span class="p">.</span><span class="nc">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="sh">"</span><span class="s">/Geometry</span><span class="sh">"</span><span class="p">)</span>
<span class="n">xform</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="p">.</span><span class="n">Xform</span><span class="p">.</span><span class="nc">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">scope</span><span class="p">.</span><span class="nc">GetPath</span><span class="p">().</span><span class="nc">AppendChild</span><span class="p">(</span><span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span><span class="p">))</span>
<span class="n">cube</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="p">.</span><span class="n">Cube</span><span class="p">.</span><span class="nc">Define</span><span class="p">(</span><span class="n">stage</span><span class="p">,</span> <span class="n">xform</span><span class="p">.</span><span class="nc">GetPath</span><span class="p">().</span><span class="nc">AppendChild</span><span class="p">(</span><span class="sh">"</span><span class="s">Box</span><span class="sh">"</span><span class="p">))</span>
</pre></table></code></div></div><p>You should see that the result of the entire stage is like the result of opening <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> . We can save it as another .usda and compare it.</p><p><a href="/assets/b8e7a81710ee/1*ICKb_BFwpmxz-bRXHJp-zw.png" class="popup img-link shimmer"><img src="/assets/b8e7a81710ee/1*ICKb_BFwpmxz-bRXHJp-zw.png" alt="Figure 3: MyModel.usda in stage" loading="lazy"></a></p><p>Figure 3: MyModel.usda in stage</p><p>The result should look something like below, just like putting <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> into Omniverse and saving it. You can refer to the previous <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#82a9" target="_blank">result</a> , which will have a bunch of settings generated by Omniverse.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">#usda 1.0
</span><span class="p">(</span>
    <span class="n">customLayerData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1">#...
</span>    <span class="p">}</span>
    <span class="c1">#...
</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">Scope</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span>
        <span class="p">{</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>With this, we have a preliminary understanding of using the OpenUSD API. We can create .usd manually or through the API. At the same time, since we can manually modify the prim data, just like what is done in <a href="../5732179f7159/">【Omniverse】Development 102: Working With Prims and Default Schemas</a> , we can do similar things through the API. First, let’s start with the Attributes of the Property.</p><h4 id="attributes"><span class="me-2">Attributes</span><a href="#attributes" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In fact, the “ <strong>real data</strong> ” in prim is divided into two categories, Property and Metadata.</p><p>Attributes belong to Property, just as mentioned in <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#76cd" target="_blank">【Omniverse】Development 102: Learning OpenUSD</a> , so here we use <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> as an example and add a simple Attributes in it, similar to what was done in <a href="../5732179f7159/">【Omniverse】Development 102: Working With Prims and Default Schemas</a> , add a <code class="language-plaintext highlighter-rouge">size</code> of type <code class="language-plaintext highlighter-rouge">double</code> , copy the following script to the Script Editor and Run.</p><div class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nt">from</span> <span class="nt">pxr</span> <span class="nt">import</span> <span class="nt">Usd</span><span class="o">,</span> <span class="nt">UsdGeom</span><span class="o">,</span> <span class="nt">Sdf</span>

<span class="nt">stage</span><span class="o">:</span> <span class="nt">Usd</span><span class="nc">.Stage</span> <span class="o">=</span> <span class="nt">omni</span><span class="nc">.usd.get_context</span><span class="o">()</span><span class="nc">.get_stage</span><span class="o">()</span>
<span class="nt">scope</span> <span class="o">=</span> <span class="nt">UsdGeom</span><span class="nc">.Scope.Define</span><span class="o">(</span><span class="nt">stage</span><span class="o">,</span> <span class="s1">"/Geometry"</span><span class="o">)</span>
<span class="nt">xform</span> <span class="o">=</span> <span class="nt">UsdGeom</span><span class="nc">.Xform.Define</span><span class="o">(</span><span class="nt">stage</span><span class="o">,</span> <span class="nt">scope</span><span class="nc">.GetPath</span><span class="o">()</span><span class="nc">.AppendChild</span><span class="o">(</span><span class="s1">"GroupTransform"</span><span class="o">))</span>
<span class="nt">cube</span> <span class="o">=</span> <span class="nt">UsdGeom</span><span class="nc">.Cube.Define</span><span class="o">(</span><span class="nt">stage</span><span class="o">,</span> <span class="nt">xform</span><span class="nc">.GetPath</span><span class="o">()</span><span class="nc">.AppendChild</span><span class="o">(</span><span class="s1">"Box"</span><span class="o">))</span>
<span class="nt">size_attr</span> <span class="o">=</span> <span class="nt">cube</span><span class="nc">.GetPrim</span><span class="o">()</span><span class="nc">.CreateAttribute</span><span class="o">(</span><span class="s1">"size"</span><span class="o">,</span> <span class="nt">Sdf</span><span class="nc">.ValueTypeNames.Double</span><span class="o">)</span>
<span class="nt">size_attr</span><span class="nc">.Set</span><span class="o">(</span><span class="err">1</span><span class="o">.</span><span class="err">0</span><span class="o">)</span>
</pre></table></code></div></div><p>As a result, you should see that the “Box” has become larger. After saving, the result is as follows</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1">#usda 1.0
</span><span class="p">(</span>
    <span class="n">customLayerData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1">#...
</span>    <span class="p">}</span>
    <span class="c1">#...
</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">Scope</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span>
        <span class="p">{</span>
            <span class="n">double</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Basically, just do the same simple thing as before. At the same time, we can find one thing, the first half of the script is to <strong>define prim</strong> , and the second half is to <strong>set the value of prim’s attribute</strong> . If there is already a prim in the scene, it is better to use <strong>get method</strong></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="n">box_prim</span> <span class="o">=</span> <span class="n">stage</span><span class="p">.</span><span class="nc">GetPrimAtPath</span><span class="p">(</span><span class="sh">"</span><span class="s">/Geometry/GroupTransform/Box</span><span class="sh">"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">box_prim</span><span class="p">:</span>
    <span class="n">size_attr</span> <span class="o">=</span> <span class="n">box_prim</span><span class="p">.</span><span class="nc">CreateAttribute</span><span class="p">(</span><span class="sh">"</span><span class="s">size</span><span class="sh">"</span><span class="p">,</span> <span class="n">Sdf</span><span class="p">.</span><span class="n">ValueTypeNames</span><span class="p">.</span><span class="n">Double</span><span class="p">)</span>
    <span class="n">size_attr</span><span class="p">.</span><span class="nc">Set</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</pre></table></code></div></div><p>This makes the script much simpler. Let’s focus on modifying the attribute. You can notice that before we set the value, we must first create, or get the <code class="language-plaintext highlighter-rouge">size</code> attribute, before we can set it further.</p><p>This approach is very intuitive. You can create any attribute you want, regardless of whether it is legal or not. In other words, if you accidentally write the wrong name, such as <code class="language-plaintext highlighter-rouge">s1ze</code> , it will not report any errors, but the <code class="language-plaintext highlighter-rouge">"Box"</code> on the screen will not respond. If we save it, we will find</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1">#usda 1.0
</span><span class="p">(</span>
    <span class="n">customLayerData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1">#...
</span>    <span class="p">}</span>
    <span class="c1">#...
</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">Scope</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span>
        <span class="p">{</span>
            <span class="n">custom</span> <span class="n">double</span> <span class="n">s1ze</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Here, we can notice that <code class="language-plaintext highlighter-rouge">s1ze</code> is indeed created, but at the same time, we can find that there is an additional <code class="language-plaintext highlighter-rouge">custom</code> in front of <code class="language-plaintext highlighter-rouge">s1ze</code> , which means that this attr is created by the user and has no preset purpose. In other words, Omniverse cannot recognize the function corresponding to this attr. Therefore, the more recommended approach is to use <a href="https://medium.com/maochinn/omniverse-development-102-working-with-prims-and-default-schemas-5732179f7159#6ce1" target="_blank">IsA Schema</a> .</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="n">box_prim</span> <span class="o">=</span> <span class="n">stage</span><span class="p">.</span><span class="nc">GetPrimAtPath</span><span class="p">(</span><span class="sh">"</span><span class="s">/Geometry/GroupTransform/Box</span><span class="sh">"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">box_prim</span><span class="p">:</span>
  <span class="n">cube</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="p">.</span><span class="nc">Cube</span><span class="p">(</span><span class="n">box_prim</span><span class="p">)</span>
  <span class="n">size_attr</span> <span class="o">=</span> <span class="n">cube</span><span class="p">.</span><span class="nc">CreateSizeAttr</span><span class="p">()</span>
  <span class="n">size_attr</span><span class="p">.</span><span class="nc">Set</span><span class="p">(</span><span class="mf">4.0</span><span class="p">)</span>
</pre></table></code></div></div><p>More specifically, it is <strong>Cube Schema</strong> , because <code class="language-plaintext highlighter-rouge">"Box"</code> is a Cube, so first we have to convert Box from a simple prim to a prim under the <code class="language-plaintext highlighter-rouge">UsdGeom.Cube</code> schema, so that we can use the method designed in the <code class="language-plaintext highlighter-rouge">UsdGeom.Cube</code> schema, that is, <code class="language-plaintext highlighter-rouge">CreateSizeAttr()</code> , on <code class="language-plaintext highlighter-rouge">"Box"</code> .</p><p>Because the Cube Schema uses the value of the <code class="language-plaintext highlighter-rouge">size</code> attr to change the size of the Cube, the Schema provides the <code class="language-plaintext highlighter-rouge">CreateSizeAttr()</code> method to help us create the corresponding attribute. During the whole process, we do not need to know the correct attribute name, we only need to use the API to ensure that we can create the correct attribute.</p><p>The advantage of using the method provided by Schema is that the name will not be misspelled and it is more readable. Of course, there are other benefits, which will be illustrated by more complex examples later. In short, in theory, both approaches are acceptable, but you can notice that here we create the attribute first and then set the value. Conversely, if we want to get the value, we must first get the attribute before getting the value.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="n">box_prim</span> <span class="o">=</span> <span class="n">stage</span><span class="p">.</span><span class="nc">GetPrimAtPath</span><span class="p">(</span><span class="sh">"</span><span class="s">/Geometry/GroupTransform/Box</span><span class="sh">"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">box_prim</span><span class="p">:</span>
  <span class="n">cube</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="p">.</span><span class="nc">Cube</span><span class="p">(</span><span class="n">box_prim</span><span class="p">)</span>
  <span class="n">size_attr</span> <span class="o">=</span> <span class="n">cube</span><span class="p">.</span><span class="nc">CreateSizeAttr</span><span class="p">()</span>
  <span class="n">size_attr</span><span class="p">.</span><span class="nc">Set</span><span class="p">(</span><span class="mf">4.0</span><span class="p">)</span>
  <span class="c1"># Get the size, display color, and extent attributes of the cube
</span>  <span class="n">cube_size</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Attribute</span> <span class="o">=</span> <span class="n">cube</span><span class="p">.</span><span class="nc">GetSizeAttr</span><span class="p">()</span>
  <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Size: </span><span class="si">{</span><span class="n">cube_size</span><span class="p">.</span><span class="nc">Get</span><span class="p">()</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</pre></table></code></div></div><p>After that, the next slightly more complicated operation is to move the <code class="language-plaintext highlighter-rouge">"Box"</code> to a specific location, in other words, to set the <strong>Translate</strong> , or more precisely, to set the <strong>Translate</strong> in the Transformation. Following the same method is like</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span><span class="p">,</span> <span class="n">Gf</span>

<span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="n">box_prim</span> <span class="o">=</span> <span class="n">stage</span><span class="p">.</span><span class="nc">GetPrimAtPath</span><span class="p">(</span><span class="sh">"</span><span class="s">/Geometry/GroupTransform/Box</span><span class="sh">"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">box_prim</span><span class="p">:</span>
  <span class="n">xformable</span> <span class="o">=</span> <span class="n">UsdGeom</span><span class="p">.</span><span class="nc">Xformable</span><span class="p">(</span><span class="n">box_prim</span><span class="p">)</span>
  <span class="n">translate_op</span> <span class="o">=</span> <span class="n">xformable</span><span class="p">.</span><span class="nc">AddTranslateOp</span><span class="p">()</span>
  <span class="n">translate_op</span><span class="p">.</span><span class="nc">Set</span><span class="p">(</span><span class="n">Gf</span><span class="p">.</span><span class="nc">Vec3f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></table></code></div></div><p>We want to move <code class="language-plaintext highlighter-rouge">"Box"</code> to the position (1, 2, 3) . We can use the <code class="language-plaintext highlighter-rouge">UsdGeom.Xformable</code> schema. After executing the save operation, we can find that there are more than one additional attribute.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1">#usda 1.0
</span><span class="p">(</span>
    <span class="n">customLayerData</span> <span class="o">=</span> <span class="p">{</span>
        <span class="c1">#...
</span>    <span class="p">}</span>
    <span class="c1">#...
</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">Scope</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span>
        <span class="p">{</span>
            <span class="n">double3</span> <span class="n">xformOp</span><span class="p">:</span><span class="n">translate</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
            <span class="n">uniform</span> <span class="n">token</span><span class="p">[]</span> <span class="n">xformOpOrder</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">xformOp:translate</span><span class="sh">"</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>In fact, similar <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#82a9" target="_blank">result</a> have been seen before. <code class="language-plaintext highlighter-rouge">xformOp:translate</code> is the position to be set. In addition, there is <code class="language-plaintext highlighter-rouge">xformOpOrder</code> . In short, <code class="language-plaintext highlighter-rouge">xformOp</code> has three types of Ops, namely <strong>scale, rotate and translate</strong> . The three Operators are not commutative, so <strong>order</strong> is very important. As long as transformation is involved, the <code class="language-plaintext highlighter-rouge">xformOpOrder</code> attribute must be present.</p><p>At this point you can see the advantage of <a href="https://medium.com/maochinn/omniverse-development-102-working-with-prims-and-default-schemas-5732179f7159#6ce1" target="_blank">IsA Schema</a> . Even if you don’t know the exact name of attribute or the associated attribute, you can still use the function normally. Although you still need to know the name of the function, there will be an error reminder if you make a typo. Of course, things are not always so beautiful. In Python API, it is a bit verbose to get the value of <code class="language-plaintext highlighter-rouge">xformOp:translate</code> .</p><div class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nt">from</span> <span class="nt">pxr</span> <span class="nt">import</span> <span class="nt">Usd</span><span class="o">,</span> <span class="nt">UsdGeom</span><span class="o">,</span> <span class="nt">Sdf</span><span class="o">,</span> <span class="nt">Gf</span>

<span class="nt">stage</span><span class="o">:</span> <span class="nt">Usd</span><span class="nc">.Stage</span> <span class="o">=</span> <span class="nt">omni</span><span class="nc">.usd.get_context</span><span class="o">()</span><span class="nc">.get_stage</span><span class="o">()</span>
<span class="nt">box_prim</span> <span class="o">=</span> <span class="nt">stage</span><span class="nc">.GetPrimAtPath</span><span class="o">(</span><span class="s1">"/Geometry/GroupTransform/Box"</span><span class="o">)</span>
<span class="nt">xformable</span> <span class="o">=</span> <span class="nt">UsdGeom</span><span class="nc">.Xformable</span><span class="o">(</span><span class="nt">box_prim</span><span class="o">)</span>
    
<span class="nt">translate_op</span> <span class="o">=</span> <span class="nt">None</span>
<span class="nt">for</span> <span class="nt">op</span> <span class="nt">in</span> <span class="nt">xformable</span><span class="nc">.GetOrderedXformOps</span><span class="o">():</span>
    <span class="nt">if</span> <span class="nt">op</span><span class="nc">.GetOpType</span><span class="o">()</span> <span class="o">==</span> <span class="nt">UsdGeom</span><span class="nc">.XformOp.TypeTranslate</span><span class="o">:</span>
        <span class="nt">translate_op</span> <span class="o">=</span> <span class="nt">op</span>
        <span class="nt">break</span>
    
<span class="nt">if</span> <span class="nt">translate_op</span><span class="o">:</span>
  <span class="nt">translate_attr</span> <span class="o">=</span> <span class="nt">translate_op</span><span class="nc">.GetAttr</span><span class="o">()</span>
  <span class="nt">translate_value</span> <span class="o">=</span> <span class="nt">translate_attr</span><span class="nc">.Get</span><span class="o">()</span>
  <span class="nt">print</span><span class="o">(</span><span class="nt">translate_value</span><span class="o">)</span>
</pre></table></code></div></div><p>If we want to get the exact value of translate, we must first get all the <code class="language-plaintext highlighter-rouge">xformOp</code> , then identify the <code class="language-plaintext highlighter-rouge">xformOp:translate</code> based on the type, then get the translate attribute, and finally get the value. Of course, we can still use a more general method</p><div class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nt">from</span> <span class="nt">pxr</span> <span class="nt">import</span> <span class="nt">Usd</span><span class="o">,</span> <span class="nt">UsdGeom</span><span class="o">,</span> <span class="nt">Sdf</span><span class="o">,</span> <span class="nt">Gf</span>

<span class="nt">stage</span><span class="o">:</span> <span class="nt">Usd</span><span class="nc">.Stage</span> <span class="o">=</span> <span class="nt">omni</span><span class="nc">.usd.get_context</span><span class="o">()</span><span class="nc">.get_stage</span><span class="o">()</span>
<span class="nt">box_prim</span> <span class="o">=</span> <span class="nt">stage</span><span class="nc">.GetPrimAtPath</span><span class="o">(</span><span class="s1">"/Geometry/GroupTransform/Box"</span><span class="o">)</span>
<span class="nt">xformable</span> <span class="o">=</span> <span class="nt">UsdGeom</span><span class="nc">.Xformable</span><span class="o">(</span><span class="nt">box_prim</span><span class="o">)</span>
<span class="nt">if</span> <span class="nt">box_prim</span><span class="o">:</span>
    <span class="nt">translate_attr</span> <span class="o">=</span> <span class="nt">prim</span><span class="nc">.GetAttribute</span><span class="o">(</span><span class="s1">"xformOp:translate"</span><span class="o">)</span>
    <span class="nt">translate_value</span> <span class="o">=</span> <span class="nt">translate_attr</span><span class="nc">.Get</span><span class="o">()</span>
</pre></table></code></div></div><p>Basically the same result can be achieved. If you know how attribute works in advance, this approach is even more convenient. You can get the specified attribute directly through <code class="language-plaintext highlighter-rouge">GetAttribute</code> . Of course, if you are really lazy, you can directly create a new one through <code class="language-plaintext highlighter-rouge">CreatAttribute</code> to overwrite the old one, and then directly call get/set to perform subsequent operations.</p><p>In short, compared to manually modifying .usd, we can also write a script to call the OpenUSD API, and then the API code will modify .usd.</p><p>Currently, there are two main ways to modify attribute using scripts. One is to use the <a href="https://medium.com/maochinn/omniverse-development-102-working-with-prims-and-default-schemas-5732179f7159#6ce1" target="_blank">IsA Schema</a> , such as the methods provided by <code class="language-plaintext highlighter-rouge">UsdGeom.Cube</code> and <code class="language-plaintext highlighter-rouge">UsdGeom.Xformable</code> , to modify it. The other is to directly use the method of <code class="language-plaintext highlighter-rouge">Usd.Prim</code> to modify it, that is, CreateAttribute( ) . Although the former may be more verbose, the advantage is that if the operation mode of Schema changes in the future, such as the name of attribute changes or other attribute is added, we do not need to modify the code, <strong>just call the latest version of the method</strong> . At the same time, calling the method also makes the overall readability of the code higher. The advantage of the latter is that it can operate data more directly, which is closer to manually modifying files and is suitable for debugging.</p><p>In fact, taking the example of moving a prim, there is a more detailed approach, which is also provided by the official course.</p><div class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nt">from</span> <span class="nt">pxr</span> <span class="nt">import</span> <span class="nt">Usd</span><span class="o">,</span> <span class="nt">UsdGeom</span><span class="o">,</span> <span class="nt">Sdf</span><span class="o">,</span> <span class="nt">Gf</span>

<span class="nt">stage</span><span class="o">:</span> <span class="nt">Usd</span><span class="nc">.Stage</span> <span class="o">=</span> <span class="nt">omni</span><span class="nc">.usd.get_context</span><span class="o">()</span><span class="nc">.get_stage</span><span class="o">()</span>
<span class="nt">box_prim</span> <span class="o">=</span> <span class="nt">stage</span><span class="nc">.GetPrimAtPath</span><span class="o">(</span><span class="s1">"/Geometry/GroupTransform/Box"</span><span class="o">)</span>
<span class="nt">UsdGeom</span><span class="nc">.XformCommonAPI</span><span class="o">(</span><span class="nt">box_prim</span><span class="o">)</span><span class="nc">.SetTranslate</span><span class="o">(</span><span class="nt">Gf</span><span class="nc">.Vec3d</span><span class="o">(</span><span class="err">1</span><span class="o">,</span> <span class="err">2</span><span class="o">,</span> <span class="err">3</span><span class="o">))</span>
</pre></table></code></div></div><p>This method is the API Schema mentioned in the <a href="../5732179f7159/">【Omniverse】Development 102: Working With Prims and Default Schemas</a> . It only requires one line, but this method usually only has APIs available for common functions. At the same time, it is also confusing. There are so many ways to achieve the same function. Which method is better? In fact, I just listed the methods of OpenUSD. Omniverse kit also has its own API to do similar things, so this issue is beyond the scope of this article and will be introduced later.</p><p>In short, there are many ways to add and adjust Attributes. The most fundamental method is to modify .usd directly, or call the designed API to modify .usd. This will avoid many human errors. Of course, you can also interact through the Omniverse interface, but in fact, it is also calling the API behind it. Relatively speaking, if you know how to use the API, you can also do the same thing, and you can also customize your own scripts and even functions that are not available in the interface.</p><p><a href="https://openusd.org/dev/api/class_usd_geom_xformable.html#ad6dfc740dcec052482489647af9ed36b" target="_blank"><strong>Universal Scene Description: UsdGeomXformable Class Reference</strong></a> <a href="https://openusd.org/dev/api/class_usd_geom_xformable.html#ad6dfc740dcec052482489647af9ed36b" target="_blank"><em>Base class for all transformable prims, which allows arbitrary sequences of component affine transformations to be…</em> openusd.org</a></p><h4 id="relationship"><span class="me-2">Relationship</span><a href="#relationship" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In addition to Attributes, Property also contains Relationship. Somehow you can regard Relationship as a special Attributes, except that it stores a pointer, which will point to the prim in the stage. We can try to open <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#188a" target="_blank"><em>Layout.usda</em></a> and execute the script</p><div class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nt">from</span> <span class="nt">pxr</span> <span class="nt">import</span> <span class="nt">Usd</span><span class="o">,</span> <span class="nt">UsdGeom</span><span class="o">,</span> <span class="nt">Sdf</span><span class="o">,</span> <span class="nt">Gf</span>

<span class="nt">stage</span><span class="o">:</span> <span class="nt">Usd</span><span class="nc">.Stage</span> <span class="o">=</span> <span class="nt">omni</span><span class="nc">.usd.get_context</span><span class="o">()</span><span class="nc">.get_stage</span><span class="o">()</span>
<span class="nt">box_prim</span> <span class="o">=</span> <span class="nt">stage</span><span class="nc">.GetPrimAtPath</span><span class="o">(</span><span class="s1">"/Geometry/GroupTransform/Box"</span><span class="o">)</span>
<span class="nt">world_prim</span> <span class="o">=</span> <span class="nt">stage</span><span class="nc">.GetPrimAtPath</span><span class="o">(</span><span class="s1">"/World"</span><span class="o">)</span>

<span class="nt">custom_relationship</span><span class="o">:</span> <span class="nt">Usd</span><span class="nc">.Relationship</span> <span class="o">=</span> <span class="nt">box_prim</span><span class="nc">.CreateRelationship</span><span class="o">(</span><span class="s1">"myCustomRelationship"</span><span class="o">)</span>
<span class="nt">custom_relationship</span><span class="nc">.SetTargets</span><span class="o">([</span><span class="s1">"/World"</span><span class="o">])</span>
</pre></table></code></div></div><p>We store a relationship in <code class="language-plaintext highlighter-rouge">"Box"</code> which stores the location of <code class="language-plaintext highlighter-rouge">"World"</code> . If you only look at it from the script, you can even think that the relationship is an attributes that stores a string, but after saving, check <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#188a" target="_blank"><em>Layout.usda</em></a> to see the difference.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1">#usda 1.0
</span>
<span class="c1">#...
</span><span class="n">over</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="n">over</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="n">over</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span>
        <span class="p">{</span>
            <span class="n">rel</span> <span class="n">myCustomRelationship</span> <span class="o">=</span> <span class="o">&lt;/</span><span class="n">World</span><span class="o">&gt;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>It does not look like a simple string. In fact, the relationship points to a specific prim in the stage. In other words, this prim may be composed of different layers. It is not a prim in a specific layer or a specific .usd.</p><p>However, the relationship itself has no special purpose. It is for people who use the prim later to know which prims are related to it. Therefore, it does not usually appear very often, especially in simple projects that do not involve scripts.</p><p><a href="https://docs.omniverse.nvidia.com/dev-guide/latest/programmer_ref/usd/properties/create-relationship.html" target="_blank"><strong>Create a Relationship — Omniverse Developer Guide</strong></a> <a href="https://docs.omniverse.nvidia.com/dev-guide/latest/programmer_ref/usd/properties/create-relationship.html" target="_blank"><em>Universal Scene Description (OpenUSD) code samples for creating a Relationship.</em> docs.omniverse.nvidia.com</a></p><p><a href="https://openusd.org/release/api/class_usd_relationship.html" target="_blank"><strong>Universal Scene Description: UsdRelationship Class Reference</strong></a> <a href="https://openusd.org/release/api/class_usd_relationship.html" target="_blank"><em>A UsdRelationship creates dependencies between scenegraph objects by allowing a prim to target other prims, attributes…</em> openusd.org</a></p><h4 id="metadata"><span class="me-2">Metadata</span><a href="#metadata" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>In addition to storing Properties, Prim can also store Metadata. As the name implies, it is data about data, such as the name of the author who created the data and comments about the data, that is, data that supplements the description of this prim. At first glance, it is similar to attribute in form, and you may think that this is similar to the function of attribute, but metadata is different from attribute because metadata does not need to be resolved or interpolated. In other words, metadata will mostly not be changed, but can be overwritten.</p><p><a href="https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata" target="_blank"><strong>Universal Scene Description: Object Model and How the Classes Work Together</strong></a> <a href="https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata" target="_blank"><em>An SdfLayer provides the interface to a persistent (in a file) or in-memory only (via “anonymous” layers) container of…</em> openusd.org</a></p><p>Another difference is that metadata cannot be customized because it is <strong>strongly typed</strong> . In other words, only registered reserved words can be used.</p><p><a href="https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata" target="_blank"><strong>Universal Scene Description: Object Model and How the Classes Work Together</strong></a> <a href="https://openusd.org/release/api/_usd__page__object_model.html#Usd_OM_Metadata" target="_blank"><em>An SdfLayer provides the interface to a persistent (in a file) or in-memory only (via “anonymous” layers) container of…</em> openusd.org</a></p><p>For example, comment belongs to metadata. After opening <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> and executing the script, we add some description to <code class="language-plaintext highlighter-rouge">"Box"</code></p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="n">box_prim</span> <span class="o">=</span> <span class="n">stage</span><span class="p">.</span><span class="nc">GetPrimAtPath</span><span class="p">(</span><span class="sh">"</span><span class="s">/Geometry/GroupTransform/Box</span><span class="sh">"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">box_prim</span><span class="p">:</span>
  <span class="n">box_prim</span><span class="p">.</span><span class="nc">SetMetadata</span><span class="p">(</span><span class="sh">'</span><span class="s">comment</span><span class="sh">'</span><span class="p">,</span> <span class="sh">"</span><span class="s">A prim of Cube</span><span class="sh">"</span><span class="p">)</span>
  <span class="nf">print</span><span class="p">(</span><span class="n">box_prim</span><span class="p">.</span><span class="nc">GetMetadata</span><span class="p">(</span><span class="sh">'</span><span class="s">comment</span><span class="sh">'</span><span class="p">))</span>
</pre></table></code></div></div><p>After saving, check .usda and you will find brackets after the prim name. The information inside is metadata.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">Scope</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span> <span class="p">(</span>
            <span class="sh">"</span><span class="s">A prim of Cube</span><span class="sh">"</span>
        <span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Of course, there is more metadata than this one. Next, we will introduce two other types of metadata.</p><h3 id="learn-openusd-understanding-model-kinds"><span class="me-2">Learn OpenUSD: Understanding Model Kinds</span><a href="#learn-openusd-understanding-model-kinds" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>The course introduces a relatively commonly used metadata, <strong>kind</strong> , which is divided into group, assembly, and component. To put it simply, it allows people to define the hierarchy of each prim themselves. Kind is the Categories of prim in the hierarchy. For example, furniture is a component, which is basically the basic unit and cannot be divided any further. Of course, there are still subcomponents that can be used. Several pieces of furniture can be grouped together, and the entire building is an assembly.</p><p><a href="https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-22+V1" target="_blank"><strong>Course Detail | NVIDIA</strong></a> <a href="https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-22+V1" target="_blank"><em>About Course Objectives Topics Covered Course Outline Stay Informed Contact Us</em> learn.nvidia.com</a></p><p>A straightforward explanation is that each prim has a <strong>tag</strong> called kind, and the possible values ​​are <strong>group, assembly, component and subcomponent.</strong> However, you can basically decide for yourself what kind of prim belongs to which kind. In other words, this requires communication with the team and synchronizing everyone’s consensus, otherwise this kind will have no real benefit. In other words, the kind of each prim is <strong>completely custom</strong> , and may not even be defined, because there is no standard answer for this kind, and it only requires the team to reach a consensus.</p><p><a href="/assets/b8e7a81710ee/1*VxEiWi94C6kSr9k3zx5U2Q.png" class="popup img-link shimmer"><img src="/assets/b8e7a81710ee/1*VxEiWi94C6kSr9k3zx5U2Q.png" alt="Figure 4: Kind" loading="lazy"></a></p><p>Figure 4: Kind</p><p>In the Omniverse Property, you can find the Kind of the prim (although it is not a Property) . There are four options to choose from. We can use <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> as an example again, set <code class="language-plaintext highlighter-rouge">"Box"</code> as a group and save it.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">#usda 1.0
</span>
<span class="c1">#...
</span><span class="k">def</span> <span class="nf">Scope</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span> <span class="p">(</span>
            <span class="n">kind</span> <span class="o">=</span> <span class="sh">"</span><span class="s">group</span><span class="sh">"</span>
        <span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>What if we want the script to do that? Suppose we want to change kind to subcomponent</p><div class="language-css highlighter-rouge"><div class="code-header"> <span data-label-text="CSS"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nt">from</span> <span class="nt">pxr</span> <span class="nt">import</span> <span class="nt">Usd</span><span class="o">,</span> <span class="nt">UsdGeom</span><span class="o">,</span> <span class="nt">Sdf</span>

<span class="nt">stage</span><span class="o">:</span> <span class="nt">Usd</span><span class="nc">.Stage</span> <span class="o">=</span> <span class="nt">omni</span><span class="nc">.usd.get_context</span><span class="o">()</span><span class="nc">.get_stage</span><span class="o">()</span>
<span class="nt">box_prim</span> <span class="o">=</span> <span class="nt">stage</span><span class="nc">.GetPrimAtPath</span><span class="o">(</span><span class="s1">"/Geometry/GroupTransform/Box"</span><span class="o">)</span>
<span class="nt">if</span> <span class="nt">box_prim</span><span class="o">:</span>
 <span class="nt">box_prim</span><span class="nc">.SetMetadata</span><span class="o">(</span><span class="s2">'kind'</span><span class="o">,</span> <span class="s1">"subcomponent"</span><span class="o">)</span>
 <span class="nt">print</span><span class="o">(</span><span class="nt">box_prim</span><span class="nc">.GetMetadata</span><span class="o">(</span><span class="s2">'kind'</span><span class="o">))</span>
</pre></table></code></div></div><p>After saving, you can check .usda</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">Scope</span> <span class="sh">"</span><span class="s">Geometry</span><span class="sh">"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="sh">"</span><span class="s">GroupTransform</span><span class="sh">"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="sh">"</span><span class="s">Box</span><span class="sh">"</span> <span class="p">(</span>
            <span class="n">kind</span> <span class="o">=</span> <span class="sh">"</span><span class="s">subcomponent</span><span class="sh">"</span>
        <span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>只是這邊要注意 <code class="language-plaintext highlighter-rouge">SetMetadata()</code> 中第一個參數，也就是metadata的名稱如果隨意取名會跳出錯誤(Unregistered metadata key)，這是因為如前面所述metadata的種類是事先設計好的，不能隨便增加種類。</p><p>但我們沒有必要使用到所有的metadata，本篇最後在介紹一種metadata，active。</p><h3 id="learn-openusd-traversing-stages"><span class="me-2">Learn OpenUSD: Traversing Stages</span><a href="#learn-openusd-traversing-stages" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>This tutorial will demonstrate how to use a script to traverse all prims in the entire stage, but in the process, the <strong>active</strong> metadata will be introduced, which will affect whether the Prim will be considered when traversing the stage.</p><p><a href="https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-21+V1" target="_blank"><strong>Course Detail | NVIDIA</strong></a> <a href="https://learn.nvidia.com/courses/course-detail?course_id=course-v1:DLI+S-OV-21+V1" target="_blank"><em>About Course Objectives Topics Covered Course Outline Stay Informed Contact Us</em> learn.nvidia.com</a></p><p>Open <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> and execute the script</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="k">for</span> <span class="n">prim</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">.</span><span class="nc">Traverse</span><span class="p">():</span>
 <span class="nf">print</span><span class="p">(</span><span class="n">prim</span><span class="p">.</span><span class="nc">GetPath</span><span class="p">().</span><span class="n">pathString</span><span class="p">)</span>
</pre></table></code></div></div><p>The script simply uses a for loop to iterate over all prims. We expect the output to be the three prims in <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> , but the actual output is as follows</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>/Geometry
/Geometry/GroupTransform
/Geometry/GroupTransform/Box
/OmniverseKit_Persp
/OmniverseKit_Front
/OmniverseKit_Top
/OmniverseKit_Right
/OmniKit_Viewport_LightRig
/OmniKit_Viewport_LightRig/Lights
/OmniKit_Viewport_LightRig/Lights/DomeLight
/OmniKit_Viewport_LightRig/Lights/DistantLight
/Render
/Render/OmniverseKit
/Render/OmniverseKit/HydraTextures
/Render/OmniverseKit/HydraTextures/omni_kit_widget_viewport_ViewportTexture_0
/Render/Vars
/Render/Vars/LdrColor
</pre></table></code></div></div><p>It can be found that only the first three belong to the <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> layer. As for the other prims, they are built-in in Omniverse. You can’t even see them in the Stage. In fact, these things do not exist in our own layer, but it is more like Omniverse has its own preset layer, which exists inside the App.</p><p>At the same time, this also brings a problem. We cannot intuitively know what is in the stage. Our .usda cannot fully represent the current stage. This is the biggest difference between Omniverse and pure OpenUSD. It also proves that <strong>Omniverse is a platform based on OpenUSD but with additional architecture</strong> .</p><p>At this point, if you only want to find the prim of a specific schema, such as Scope and Cube, you can execute the script</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="k">for</span> <span class="n">prim</span> <span class="ow">in</span> <span class="n">stage</span><span class="p">.</span><span class="nc">Traverse</span><span class="p">():</span>
 <span class="k">if</span> <span class="n">UsdGeom</span><span class="p">.</span><span class="nc">Scope</span><span class="p">(</span><span class="n">prim</span><span class="p">):</span>
  <span class="nf">print</span><span class="p">(</span><span class="n">prim</span><span class="p">.</span><span class="nc">GetPath</span><span class="p">().</span><span class="n">pathString</span><span class="p">)</span>
 <span class="k">elif</span> <span class="n">prim</span><span class="p">.</span><span class="nc">IsA</span><span class="p">(</span><span class="n">UsdGeom</span><span class="p">.</span><span class="n">Cube</span><span class="p">):</span>
  <span class="nf">print</span><span class="p">(</span><span class="n">prim</span><span class="p">.</span><span class="nc">GetPath</span><span class="p">().</span><span class="n">pathString</span><span class="p">)</span>
</pre></table></code></div></div><p>This will only output</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="o">/</span><span class="n">Geometry</span>
<span class="o">/</span><span class="n">Geometry</span><span class="o">/</span><span class="n">GroupTransform</span><span class="o">/</span><span class="nb">Box</span>
</pre></table></code></div></div><h4 id="activeinactive"><span class="me-2">Active/Inactive</span><a href="#activeinactive" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>Next is the <strong>active</strong> metadata. Open <a href="https://medium.com/maochinn/omniverse-development-102-openusd-59dee6c16bd5#dd89" target="_blank"><em>MyModel.usda</em></a> and execute the following script</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="n">pxr</span> <span class="kn">import</span> <span class="n">Usd</span><span class="p">,</span> <span class="n">UsdGeom</span><span class="p">,</span> <span class="n">Sdf</span>

<span class="n">stage</span><span class="p">:</span> <span class="n">Usd</span><span class="p">.</span><span class="n">Stage</span> <span class="o">=</span> <span class="n">omni</span><span class="p">.</span><span class="n">usd</span><span class="p">.</span><span class="nf">get_context</span><span class="p">().</span><span class="nf">get_stage</span><span class="p">()</span>
<span class="n">box_prim</span> <span class="o">=</span> <span class="n">stage</span><span class="p">.</span><span class="nc">GetPrimAtPath</span><span class="p">(</span><span class="sh">"</span><span class="s">/Geometry/GroupTransform/Box</span><span class="sh">"</span><span class="p">)</span>
<span class="k">if</span> <span class="n">box_prim</span><span class="p">:</span>
  <span class="n">box_prim</span><span class="p">.</span><span class="nc">SetMetadata</span><span class="p">(</span><span class="sh">'</span><span class="s">active</span><span class="sh">'</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
</pre></table></code></div></div><p>After saving, you can see that the metadata of <code class="language-plaintext highlighter-rouge">"Box"</code> has an additional active</p><div class="language-ruby highlighter-rouge"><div class="code-header"> <span data-label-text="Ruby"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">Scope</span> <span class="s2">"Geometry"</span>
<span class="p">{</span>
    <span class="k">def</span> <span class="nf">Xform</span> <span class="s2">"GroupTransform"</span>
    <span class="p">{</span>
        <span class="k">def</span> <span class="nf">Cube</span> <span class="s2">"Box"</span> <span class="p">(</span>
            <span class="n">active</span> <span class="o">=</span> <span class="kp">false</span>
        <span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>At the same time, the <code class="language-plaintext highlighter-rouge">"Box"</code> of the Stage in Omniverse has also changed, and you can find that there are more prohibited symbols.</p><p><a href="/assets/b8e7a81710ee/1*LURU9tKGfdbZOQq31dt5og.png" class="popup img-link shimmer"><img src="/assets/b8e7a81710ee/1*LURU9tKGfdbZOQq31dt5og.png" alt="" loading="lazy"></a></p><p>At this point, re-execute the Traverse script and you will find that the output is only</p><div class="language-rust highlighter-rouge"><div class="code-header"> <span data-label-text="Rust"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="o">/</span><span class="n">Geometry</span>
</pre></table></code></div></div><p>There are other metadata, but I won’t list them all here. You can try them yourself or search using GPT. For example:</p><ol><li><code class="language-plaintext highlighter-rouge">hidden</code> ：This metadata key is used to mark whether a primitive object is hidden. Equivalent to calling the <code class="language-plaintext highlighter-rouge">UsdPrim::SetHidden()</code> method.<li><code class="language-plaintext highlighter-rouge">kind</code> ：This metadata key is used to specify the type of primitive object (e.g., group, component, etc. ) .<li><code class="language-plaintext highlighter-rouge">assetInfo</code> ：This is a dictionary used to store information related to the asset, such as the asset’s name, version, etc.<li><code class="language-plaintext highlighter-rouge">documentation</code> ：This metadata key is used to store documentation or descriptive information related to the original object.<li><code class="language-plaintext highlighter-rouge">comment</code> ：This metadata key is used to store comments or notes related to the original object.<li><code class="language-plaintext highlighter-rouge">customLayerData</code> ：This is a dictionary used to store custom layer data. instanceable: This metadata key is used to mark whether a primitive object is instantiable.<li><code class="language-plaintext highlighter-rouge">instanceable</code> ：這個元數據鍵用於標記一個原始物體是否可實例化。</ol><p>In short, as in the example of kind, metadata is like the tag of prim</p><h3 id="conclusion"><span class="me-2">Conclusion</span><a href="#conclusion" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>In summary, this article mainly introduces the data in prim, which is divided into <strong>Property</strong> and <strong>Metadata</strong> . In this way, we basically have a general understanding of the composition of prim. In addition, it also introduces how to execute simple scripts in Omniverse. At the same time, you can compare the changes in the screen and .usd, and basically you can explore more deeply. For example, the <strong>Value resolution</strong> that I skipped is about the strategy for attribute parsing, because the value of attributecomes from three sources.</p><ul><li>Value clips<li>Authored timeSamples<li>Default value</ul><p>Simply put, the first two are related to the <strong>animation</strong> system, because compared to metadata, the feature of <strong>attribute</strong> is that it will be <strong>interpolated over time.</strong> The last one is the default value stored in <strong>attribute</strong> itself. The priority is from top to bottom. If there is no animation, most of the time the default value is used.</p><p>It is worth noting that for attributes with the same name but in different layers, the attribute with the strongest opinion will eventually win. At this time, the value of the prim attribute composed on the stage is the Default value. In other words, the value of the attribute in the stage in this article and even in previous articles is the <strong>Default value</strong> .</p><p>The details will be introduced in the next article.</p><p>Thank you for reading! If you found my article helpful or have any feedback, feel free to reply. If you’d like to support me, you can:</p><ul><li>Clap 👏 or share your thoughts 💬<li><a href="https://medium.com/@maochinn" target="_blank">Follow me on Medium</a><li><a href="https://medium.com/maochinn" target="_blank">Subscribe to me on Medium</a><li><a href="https://www.linkedin.com/in/chih-wei-chang-6526801b2/" target="_blank">Connect with me on LinkedIn</a></ul><p>You can also check out my other series of articles:</p><ul><li><a href="../78f8915183be/">【Omniverse】Development 101: Getting Started with Kit-Based Development</a><li><a href="../1d990d98b7f9/">【Omniverse】Development 101: Understanding Applications and Extensions</a><li><a href="../310a189add0b/">【Omniverse】Development 101: Kit Workshop SIGGRAPH 2022</a><li><a href="../59dee6c16bd5/">【Omniverse】Development 102: Learning OpenUSD</a><li><a href="../5732179f7159/">【Omniverse】Development 102: Working With Prims and Default Schemas</a></ul><p><em><a href="https://medium.com/maochinn/omniverse-development-102-property-and-metadata-b8e7a81710ee" target="_blank">Post</a> converted from Medium by <a href="https://github.com/ZhgChgLi/ZMediumToMarkdown" target="_blank">ZMediumToMarkdown</a>.</em></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/maochinn/">Maochinn</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/nvidia/" class="post-tag no-text-decoration" >nvidia</a> <a href="/tags/omniverse/" class="post-tag no-text-decoration" >omniverse</a> <a href="/tags/openusd/" class="post-tag no-text-decoration" >openusd</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E3%80%90Omniverse%E3%80%91Development%20102:%20Scripting%20Properties%20and%20Metadata%20-%20Medium%20To%20Jekyll%20Starter&url=https%3A%2F%2Fmedium-to-jekyll-starter.zhgchg.li%2F%2Fposts%2Fb8e7a81710ee%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E3%80%90Omniverse%E3%80%91Development%20102:%20Scripting%20Properties%20and%20Metadata%20-%20Medium%20To%20Jekyll%20Starter&u=https%3A%2F%2Fmedium-to-jekyll-starter.zhgchg.li%2F%2Fposts%2Fb8e7a81710ee%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmedium-to-jekyll-starter.zhgchg.li%2F%2Fposts%2Fb8e7a81710ee%2F&text=%E3%80%90Omniverse%E3%80%91Development%20102:%20Scripting%20Properties%20and%20Metadata%20-%20Medium%20To%20Jekyll%20Starter" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Telegram" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/83f3d470b656/">【自動化】學習筆記 — 01：硬體</a><li class="text-truncate lh-lg"> <a href="/posts/de28dc8582ec/">【自動化】學習筆記 — 00</a><li class="text-truncate lh-lg"> <a href="/posts/6560b300f03c/">【工作】NVIDIA GTC Taipai 2025 — Day 0：Building Digital Twins for Physical AI With NVIDIA Omniverse</a><li class="text-truncate lh-lg"> <a href="/posts/230d146467b3/">【工作】NVIDIA GTC Taipai 2025 — Day 1：Manufacturing sessions</a><li class="text-truncate lh-lg"> <a href="/posts/616f6e63db42/">【工作】NVIDIA GTC Taipai 2025 — Day 2：Physical Al and Robotics Sessions</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/computer-graphics/">computer-graphics</a> <a class="post-tag btn btn-outline-primary" href="/tags/omniverse/">omniverse</a> <a class="post-tag btn btn-outline-primary" href="/tags/digital-art/">digital-art</a> <a class="post-tag btn btn-outline-primary" href="/tags/nvidia/">nvidia</a> <a class="post-tag btn btn-outline-primary" href="/tags/blender/">blender</a> <a class="post-tag btn btn-outline-primary" href="/tags/krenz/">krenz</a> <a class="post-tag btn btn-outline-primary" href="/tags/business-trip/">business-trip</a> <a class="post-tag btn btn-outline-primary" href="/tags/siggraph/">siggraph</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%9B%BB%E8%85%A6%E5%9C%96%E5%AD%B8/">電腦圖學</a> <a class="post-tag btn btn-outline-primary" href="/tags/cosmos/">cosmos</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/a7fa6a26a49a/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1738769292" data-df="ll" > Feb 5, 2025 </time><h4 class="pt-0 my-2">【Omniverse】學習筆記 — 05：Property and Metadata</h4><div class="text-muted"><p>在【Omniverse】學習筆記 — 04：Prims and Schemas中我們學到如何直接v修改.usd的內容來增加和修改layer中的prim，本篇將會在Omniverse內建的Script Editor中，使用OpenUSD…</p></div></div></a></article><article class="col"> <a href="/posts/8a5581d9ef78/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1735208820" data-df="ll" > Dec 26, 2024 </time><h4 class="pt-0 my-2">【Omniverse】學習筆記 — 04：Prims and Schemas</h4><div class="text-muted"><p>在【Omniverse】學習筆記 — 03：OpenUSD中大概解釋了OpenUSD大致的概念，包含如何簡單編輯.usd檔案，並透過omniverse app來與之互動與檢視。我們可以快速回顧一下內容。</p></div></div></a></article><article class="col"> <a href="/posts/5732179f7159/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1735208771" data-df="ll" > Dec 26, 2024 </time><h4 class="pt-0 my-2">【Omniverse】Development 102: Working With Prims and Default Schemas</h4><div class="text-muted"><p>In 【Omniverse】Development 102: Learning OpenUSD, the general concept of OpenUSD is roughly explained, including how to simply edit the…</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/a7fa6a26a49a/" class="btn btn-outline-primary" aria-label="Older" ><p>【Omniverse】學習筆記 — 05：Property and Metadata</p></a> <a href="/posts/a1549af4fef2/" class="btn btn-outline-primary" aria-label="Newer" ><p>【Cosmos】Physical AI, Agent and World Model</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2025</time> <a href="https://twitter.com/username">your_full_name</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.3.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.<br/> Automatically sync posts from Medium with <a href="https://zhgchg.li/posts/en-medium-to-jekyll/" target="_blank">ZhgChg.Li</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/computer-graphics/">computer-graphics</a> <a class="post-tag btn btn-outline-primary" href="/tags/omniverse/">omniverse</a> <a class="post-tag btn btn-outline-primary" href="/tags/digital-art/">digital-art</a> <a class="post-tag btn btn-outline-primary" href="/tags/nvidia/">nvidia</a> <a class="post-tag btn btn-outline-primary" href="/tags/blender/">blender</a> <a class="post-tag btn btn-outline-primary" href="/tags/krenz/">krenz</a> <a class="post-tag btn btn-outline-primary" href="/tags/business-trip/">business-trip</a> <a class="post-tag btn btn-outline-primary" href="/tags/siggraph/">siggraph</a> <a class="post-tag btn btn-outline-primary" href="/tags/%E9%9B%BB%E8%85%A6%E5%9C%96%E5%AD%B8/">電腦圖學</a> <a class="post-tag btn btn-outline-primary" href="/tags/cosmos/">cosmos</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
